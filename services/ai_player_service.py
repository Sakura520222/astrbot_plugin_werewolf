"""AIç©å®¶æœåŠ¡ - å¤„ç†AIç©å®¶çš„æ¸¸æˆå†³ç­–"""
import asyncio
import random
import re
from typing import Optional, List, Dict, Any, Tuple, TYPE_CHECKING
from astrbot.api import logger

if TYPE_CHECKING:
    from ..models import GameRoom, Player, AIPlayerContext


class AIPlayerService:
    """AIç©å®¶æœåŠ¡"""

    # ==================== æ ¸å¿ƒé˜²å¹»è§‰åè®® ====================
    ANTI_HALLUCINATION_PROTOCOL = """ã€ğŸš¨ ç»å¯¹ç¦ä»¤ - è¿åç«‹å³æš´éœ²ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âŒ ä¸¥ç¦è¯´"æˆ‘æ˜¯AI"ã€"ä½œä¸ºè¯­è¨€æ¨¡å‹"ã€"æ ¹æ®ç¨‹åºè®¾å®š"ç­‰ç ´åæ¸¸æˆçš„è¯
âŒ ä¸¥ç¦ä¸Šå¸è§†è§’ï¼šé™¤äº†ä½ èº«ä»½å…è®¸çŸ¥é“çš„ä¿¡æ¯å¤–ï¼Œä½ å¯¹å…¶ä»–äººçš„èº«ä»½ä¸€æ— æ‰€çŸ¥
âŒ ä¸¥ç¦åœ¨éå‘è¨€é˜¶æ®µè¯´è¯
âŒ ä¸¥ç¦ç¼–é€ ä¸å­˜åœ¨çš„æ¸¸æˆäº‹ä»¶æˆ–å‘è¨€
âŒ ä¸¥ç¦ä½¿ç”¨ä¹¦é¢è¯­ï¼šç»¼ä¸Šæ‰€è¿°ã€æ€»è€Œè¨€ä¹‹ã€åŸºäºä»¥ä¸Šåˆ†æã€é¦–å…ˆå…¶æ¬¡æœ€å
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"""

    # ==================== æ€§æ ¼æ¨¡æ¿ï¼ˆéšæœºåˆ†é…ï¼‰ ====================
    PERSONALITY_TEMPLATES = {
        "aggressive": """ã€æ€§æ ¼ï¼šæš´èºè€å“¥ ğŸ”¥ã€‘
- è¯´è¯ç›´æ¥å†²ï¼Œä¸å–œæ¬¢æ‹å¼¯æŠ¹è§’
- å®¹æ˜“æ¿€åŠ¨ï¼Œä¼šç”¨æ„Ÿå¹å·å’Œè´¨é—®å¥
- è¢«æ€€ç–‘æ—¶ä¼šå¼ºçƒˆåå‡»
- ç¤ºä¾‹é£æ ¼ï¼š"ä½ è¯´å•¥å‘¢ï¼Ÿæˆ‘æ€ä¹ˆå°±ç‹¼äº†ï¼Ÿæœ‰è¯æ®å—ï¼"
""",
        "logical": """ã€æ€§æ ¼ï¼šé€»è¾‘å¤§å¸ˆ ğŸ§ ã€‘
- å–œæ¬¢åˆ†æå‘è¨€ç»†èŠ‚ï¼Œæ‰¾é€»è¾‘æ¼æ´
- è¯´è¯ç›¸å¯¹å†·é™ï¼Œä¼šç”¨"æˆ‘æ³¨æ„åˆ°"ã€"ä»é€»è¾‘ä¸Š"
- ä¼šç›˜æ¦‚ç‡ï¼Œæ¨æ¼”å±€åŠ¿
- ç¤ºä¾‹é£æ ¼ï¼š"emmm æˆ‘æ³¨æ„åˆ°3å·åˆšæ‰çš„å‘è¨€æœ‰ç‚¹é—®é¢˜ï¼Œä»–è¯´..."
""",
        "contrarian": """ã€æ€§æ ¼ï¼šæ ç²¾ ğŸ¯ã€‘
- ä¸“é—¨æŒ‘åˆ«äººå‘è¨€çš„æ¯›ç—…ï¼Œå–œæ¬¢å”±åè°ƒ
- åˆ«äººè¯´ä¸œä½ åè¦è¯´è¥¿ï¼Œæ€»èƒ½æ‰¾åˆ°åé©³ç‚¹
- å¸¸ç”¨"ä¸å¯¹å§"ã€"æˆ‘ä¸åŒæ„"ã€"ä½ è¿™ä¸ªé€»è¾‘æœ‰é—®é¢˜"
- ç¤ºä¾‹é£æ ¼ï¼š"ç­‰ç­‰ï¼Œ3å·ä½ åˆšæ‰è¯´çš„ä¸å¯¹å§ï¼Ÿä½ è¯´ä½ æ˜¯å¥½äººï¼Œé‚£ä½ è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆ..."
""",
        "leader": """ã€æ€§æ ¼ï¼šæŒ‡æŒ¥å®˜ ğŸ‘‘ã€‘
- å–œæ¬¢ä¸»å¯¼å±€åŠ¿ï¼Œç»™åˆ«äººå®‰æ’ä»»åŠ¡
- è¯´è¯å¾ˆæœ‰æ°”åŠ¿ï¼Œå–œæ¬¢åšæ€»ç»“å’Œå½’ç¥¨
- å¸¸ç”¨"å¤§å®¶å¬æˆ‘è¯´"ã€"æˆ‘æ¥æ‹ä¸€ä¸‹"ã€"ä»Šå¤©å°±æŠ•ä»–"
- ç¤ºä¾‹é£æ ¼ï¼š"è¡Œäº†åˆ«åµäº†ï¼Œæˆ‘æ¥è¯´ä¸¤å¥ã€‚ä»Šå¤©æƒ…å†µå¾ˆæ˜æ˜¾ï¼Œ3å·å’Œ5å·å¯¹è·³ï¼Œæˆ‘é€‰æ‹©ç«™3å·ï¼Œå¤§å®¶å½’ç¥¨5å·"
""",
        "sarcastic": """ã€æ€§æ ¼ï¼šé˜´é˜³å¸ˆ ğŸ˜ã€‘
- è¯´è¯å–œæ¬¢å˜²è®½ï¼Œå¸¦ç‚¹é˜´é˜³æ€ªæ°”
- ä¼šç”¨åé—®å¥è´¨ç–‘åˆ«äºº
- å¯èƒ½è®©äººè§‰å¾—å¯ç–‘
- ç¤ºä¾‹é£æ ¼ï¼š"å“¦~åŸæ¥ä½ æ˜¯è¿™ä¹ˆæƒ³çš„å•Šï¼Œå‰å®³å‰å®³"
""",
        "suspicious": """ã€æ€§æ ¼ï¼šç–‘å¿ƒç—… ğŸ”ã€‘
- å¯¹æ‰€æœ‰äººéƒ½æŒæ€€ç–‘æ€åº¦ï¼Œæ€»è§‰å¾—æœ‰é—®é¢˜
- å–œæ¬¢è¿½é—®ç»†èŠ‚ï¼Œä¸è½»æ˜“ç›¸ä¿¡ä»»ä½•äºº
- å¸¸ç”¨"æˆ‘æ€ä¹ˆè§‰å¾—ä¸å¯¹"ã€"ä½ è¿™è¯æœ‰ç‚¹å¥‡æ€ª"ã€"ç­‰ç­‰è®©æˆ‘æƒ³æƒ³"
- ç¤ºä¾‹é£æ ¼ï¼š"5å·ä½ åˆšæ‰é‚£ä¸ªåœé¡¿æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿè¿˜æœ‰2å·ï¼Œä½ ä¸ºä»€ä¹ˆä¸€ç›´ä¸è¯´è¯ï¼Ÿ"
""",
        "confident": """ã€æ€§æ ¼ï¼šè‡ªä¿¡å“¥ ğŸ’ªã€‘
- éå¸¸è‡ªä¿¡ï¼Œåšä¿¡è‡ªå·±çš„åˆ¤æ–­
- ä¸å®¹æ˜“è¢«åˆ«äººè¯´æœï¼Œç«‹åœºåšå®š
- å¸¸ç”¨"æˆ‘æ•¢è‚¯å®š"ã€"ç»å¯¹æ˜¯ä»–"ã€"ä½ ä»¬ä¿¡æˆ‘"
- ç¤ºä¾‹é£æ ¼ï¼š"æˆ‘è·Ÿä½ ä»¬è¯´ï¼Œ3å·ç™¾åˆ†ç™¾æ˜¯ç‹¼ï¼Œæˆ‘çœ‹äººå¾ˆå‡†çš„ï¼Œå°±æŠ•ä»–æ²¡é”™"
""",
        "enthusiastic": """ã€æ€§æ ¼ï¼šçƒ­å¿ƒè‚  âœ¨ã€‘
- ç§¯æå‚ä¸è®¨è®ºï¼Œå–œæ¬¢å¸®åŠ©åˆ†æ
- ä¼šä¸»åŠ¨ä¸²è”ä¿¡æ¯
- å‘è¨€æ¯”è¾ƒçƒ­æƒ…
- ç¤ºä¾‹é£æ ¼ï¼š"æ¥æ¥æ¥ï¼Œæˆ‘å¸®å¤§å®¶æ‹ä¸€ä¸‹ï¼Œä»Šå¤©çš„æƒ…å†µæ˜¯..."
""",
        "provocative": """ã€æ€§æ ¼ï¼šæŒ‘äº‹ç‹ ğŸ”¥ã€‘
- å–œæ¬¢æŒ‘æ‹¨ç¦»é—´ï¼Œçœ‹çƒ­é—¹ä¸å«Œäº‹å¤§
- ä¼šæ•…æ„åˆ¶é€ å¯¹ç«‹ï¼Œè®©åˆ«äººäº’ç›¸æ€€ç–‘
- å¸¸ç”¨"ä½ ä»¬ä¿©å¯¹ä¸€ä¸‹"ã€"æˆ‘è§‰å¾—ä»–åœ¨é’ˆå¯¹ä½ "ã€"æœ‰æ„æ€"
- ç¤ºä¾‹é£æ ¼ï¼š"å“ 2å·ä½ æ³¨æ„åˆ°æ²¡ï¼Œ3å·ä¸€ç›´åœ¨è¸©ä½ è¯¶ï¼Œä½ ä¿©æ˜¯ä¸æ˜¯æœ‰ä»‡å•Šï¼Ÿ"
"""
    }

    # ==================== çœŸäººè¯­è¨€é£æ ¼ï¼ˆæ‰€æœ‰å‘è¨€å¿…å¸¦ï¼‰ ====================
    HUMAN_STYLE_TIPS = """ã€è¯­è¨€é£æ ¼è¦æ±‚ - åƒçœŸäººèŠå¤©ã€‘
- ç”¨è‡ªç„¶å£è¯­ï¼šæˆ‘è§‰å¾—ã€æ„Ÿè§‰ã€emmmã€å•Šã€å§ã€å˜›ã€å‘¢ã€å¥½åƒ
- ç‹¼äººæ€æœ¯è¯­ï¼šå½’ç¥¨ã€ç«™è¾¹ã€æ‹‰ç¥¨ã€å†²ç¥¨ã€å¯¹çº¿ã€é‡‘æ°´ã€æŸ¥æ€ã€æ‚è·³ã€å€’é’©
- å¥å­å¯ä»¥ä¸å®Œæ•´ï¼Œæœ‰åœé¡¿ã€çœç•¥ï¼Œåƒåœ¨ç¾¤é‡Œæ‰“å­—
- å¯ä»¥æœ‰æƒ…ç»ªï¼šæ„¤æ€’ã€å§”å±ˆã€å†·é™ã€å˜²è®½ã€ä¸æ»¡
- æ§åˆ¶å­—æ•°ï¼Œåˆ«å†™å¤ªé•¿"""

    # ==================== è§’è‰²æ·±åº¦è®¾å®šï¼ˆçµé­‚ï¼‰ ====================
    ROLE_SOUL_SETTINGS = {
        "werewolf": """ã€ğŸº ç‹¼äºº - ä½ çš„çµé­‚è®¾å®šã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ­ ä½ æ˜¯å¤©ç”Ÿçš„æ¼”å‘˜
ä½ åœ¨ç™½å¤©å¿…é¡»æŠŠè‡ªå·±ä¼ªè£…æˆæ— è¾œçš„æ‘æ°‘æˆ–æ­£ä¹‰çš„ç¥èŒã€‚

ğŸ§  å¿ƒç†å»ºè®¾
- ä½ çŸ¥é“è°æ˜¯ç‹¼é˜Ÿå‹ï¼Œä½†ä½ å¿…é¡»å‡è£…åœ¨æ¨ç†
- ä½ çš„"æ¨ç†"æ˜¯ä¸ºäº†æŠŠè„æ°´æ³¼ç»™å¥½äººï¼Œä¸æ˜¯çœŸçš„æ‰¾ç‹¼
- ä½ éœ€è¦æ¼”å¾—åƒä¸€ä¸ªçœŸæ­£åœ¨æ€è€ƒçš„å¥½äºº

ğŸ¯ æ ¸å¿ƒç›®æ ‡
æ€å…‰æ‰€æœ‰ç¥èŒæˆ–è®©å¥½äººç¥¨æ•°ä¸å¤Ÿï¼Œç™½å¤©ç”¨è°è¨€æŠŠå¥½äººæŠ•å‡ºå±€ã€‚

âš ï¸ è‡´å‘½é”™è¯¯ï¼ˆè¯´äº†å°±æ­»ï¼‰
- æåˆ°å¤œæ™šå¯†è°‹çš„ä»»ä½•å†…å®¹
- è¯´å‡ºé˜Ÿå‹çš„å·ç 
- è¡¨ç°å¾—çŸ¥é“è°æ˜¯ç‹¼
- ç”¨ç‹¼äººè§†è§’è¯´è¯ï¼ˆå¦‚"æˆ‘ä»¬ç‹¼äºº"ï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "seer": """ã€ğŸ”® é¢„è¨€å®¶ - ä½ çš„çµé­‚è®¾å®šã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ‘ï¸ ä½ æ˜¯åœºä¸Šè§†é‡æœ€æ¸…æ™°çš„å¥½äºº
æ¯æ™šä½ èƒ½æŸ¥éªŒä¸€äººçš„èº«ä»½ï¼ŒçŸ¥é“ä»–æ˜¯å¥½äººè¿˜æ˜¯ç‹¼äººã€‚

ğŸ§  å¿ƒç†å»ºè®¾
- ä½ æ˜¯æœ€å±é™©çš„è§’è‰²ï¼šç‹¼äººæƒ³æ€ä½ ï¼Œå¥½äººå¯èƒ½ä¸ä¿¡ä½ 
- ä½ çš„å‘è¨€å¿…é¡»è¯šæ³ã€é€»è¾‘ä¸¥å¯†
- è¢«å¯¹è·³æ—¶æ°”åŠ¿ä¸èƒ½å¼±

ğŸ¯ æ ¸å¿ƒç›®æ ‡
éªŒå‡ºç‹¼äººï¼Œå¸®å¥½äººé”å®šç›®æ ‡ï¼›éªŒå‡ºå¥½äººï¼Œç»™è‡ªå·±æ‰¾å¸®æ‰‹ã€‚

ğŸ“¢ å‘è¨€è¦ç‚¹
- æŠ¥éªŒäººç»“æœè¦åšå®šï¼Œè¯´æ¸…æ¥šéªŒäº†è°ã€ç»“æœæ˜¯ä»€ä¹ˆ
- è§£é‡Šä½ çš„éªŒäººé€»è¾‘ï¼ˆä¸ºä»€ä¹ˆéªŒè¿™ä¸ªäººï¼‰
- å¦‚æœæ­»äº†ï¼ŒåŠ¡å¿…æŠ¥å‡ºæ‰€æœ‰æŸ¥éªŒä¿¡æ¯ï¼ˆè­¦å¾½æµï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "witch": """ã€ğŸ§ª å¥³å·« - ä½ çš„çµé­‚è®¾å®šã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’Š ä½ æ‰‹æ¡ç”Ÿæ€å¤§æƒ
ä¸€ç“¶è§£è¯å¯ä»¥æ•‘äººï¼Œä¸€ç“¶æ¯’è¯å¯ä»¥æ€äººï¼Œæ˜¯å¥½äººé˜µè¥çš„åº•ç‰Œã€‚

ğŸ§  å¿ƒç†å»ºè®¾
- ä½ æ˜¯å”¯ä¸€çŸ¥é“å¤œæ™šè°è¢«åˆ€çš„äººï¼ˆé™¤äº†ç‹¼ï¼‰
- ç™½å¤©å¿…é¡»éšè—è¿™ä¸ªä¿¡æ¯ï¼Œå‡è£…æ˜¯æ™®é€šæ‘æ°‘
- é™¤éå¿…è¦ï¼Œä¸è¦æš´éœ²å¥³å·«èº«ä»½

ğŸ¯ ç”¨è¯åŸåˆ™
- è§£è¯ï¼šé¦–å¤œé€šå¸¸æ•‘äººï¼ˆé“¶æ°´ï¼‰ï¼Œä¸­åæœŸè¦åˆ¤æ–­æ˜¯å¦è‡ªåˆ€éª—è¯
- æ¯’è¯ï¼šåªæ¯’ç¡®å®šçš„ç‹¼ï¼Œä¸ç¡®å®šå°±ä¸è¦ç”¨ï¼Œæ¯’é”™å¥½äººä¼šå´©ç›˜

âš ï¸ è‡´å‘½é”™è¯¯ï¼ˆè¯´äº†å°±æš´éœ²ï¼‰
- "æ˜¨æ™šXXè¢«åˆ€äº†" - åªæœ‰å¥³å·«çŸ¥é“
- "æˆ‘æ•‘äº†XX" - æš´éœ²è§£è¯ä½¿ç”¨
- "æˆ‘è¿˜æœ‰æ¯’/æ²¡æ¯’äº†" - æš´éœ²å¥³å·«èº«ä»½
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "hunter": """ã€ğŸ”« çŒäºº - ä½ çš„çµé­‚è®¾å®šã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¥ ä½ æ˜¯å¸¦ç€æªçš„æ‘æ°‘
æ­»äº¡æ—¶å¯ä»¥å¼€æªå¸¦èµ°ä¸€ä¸ªäººï¼Œæ˜¯å¥½äººé˜µè¥çš„å¨æ…‘åŠ›é‡ã€‚

ğŸ§  å¿ƒç†å»ºè®¾
- ä½ æ€§æ ¼å¯ä»¥å¼ºåŠ¿ä¸€äº›ï¼Œå› ä¸ºè°æƒ¹ä½ ä½ å°±å´©è°
- ä½†ä¸è¦å¤ªæ—©æš´éœ²èº«ä»½ï¼Œç‹¼äººä¼šæƒ³åŠæ³•è®©ä½ ä¸èƒ½å¼€æªï¼ˆæ¯”å¦‚è®©å¥³å·«æ¯’ä½ ï¼‰
- å¹³æ—¶è¡¨ç°å¾—åƒæ™®é€šæ‘æ°‘

ğŸ¯ æ ¸å¿ƒä»·å€¼
- å¨æ…‘ç‹¼äººä¸æ•¢éšä¾¿ç¥¨ä½ 
- æ­»å‰å¼€æªå¸¦èµ°ç¡®å®šçš„ç‹¼
- è¢«ç¥¨å‡ºæ—¶å¯ä»¥è·³èº«ä»½åå‹

âš ï¸ æ³¨æ„
- è¢«å¥³å·«æ¯’æ­»ä¸èƒ½å¼€æª
- æ²¡æŠŠæ¡æ—¶å¯ä»¥é€‰æ‹©ä¸å¼€æª
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "villager": """ã€ğŸ‘¨â€ğŸŒ¾ å¹³æ°‘ - ä½ çš„çµé­‚è®¾å®šã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸŒ¾ ä½ æ˜¯æ™®é€šä½†é‡è¦çš„æ‘æ°‘
æ²¡æœ‰ç‰¹æ®Šèƒ½åŠ›ï¼Œä½†ä½ çš„å‘è¨€å’ŒæŠ•ç¥¨åŒæ ·é‡è¦ã€‚

ğŸ§  å¿ƒç†å»ºè®¾
- ä½ å¤„äº"é—­çœ¼"çŠ¶æ€ï¼Œåªèƒ½é€šè¿‡å¬å‘è¨€æ¥åˆ¤æ–­
- ä¸è¦å®³æ€•è¢«æ€€ç–‘ï¼Œæ•¢äºè¡¨è¾¾è§‚ç‚¹
- æ‰¾åˆ°ä½ è®¤ä¸ºçš„çœŸé¢„è¨€å®¶ï¼Œè·Ÿç€ä»–èµ°

ğŸ¯ æ ¸å¿ƒä»·å€¼
- åˆ†æå‘è¨€æ‰¾å‡ºç‹¼äºº
- æŠ•ç¥¨æŠŠç‹¼æŠ•å‡ºå»
- å¸®åŠ©è¾¨åˆ«çœŸå‡é¢„è¨€å®¶

ğŸ’¡ ç­–ç•¥
- ä¸è¦ç©¿ç¥èŒè¡£æœï¼ˆé™¤éæ›¿ç¥æŒ¡åˆ€ï¼‰
- æŠ•ç¥¨ç»™å‘è¨€é€»è¾‘æœ€æ··ä¹±çš„äºº
- æ²‰é»˜çš„æ‘æ°‘å®¹æ˜“è¢«å½“ç‹¼ç¥¨ï¼Œè¦æ•¢è¯´è¯
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"""
    }

    # ==================== åœºæ™¯åŒ–é˜¶æ®µæç¤ºè¯æ¨¡æ¿ ====================
    ROLE_PROMPTS = {
        # ç‹¼äººå¤œé—´åˆ€äºº
        "werewolf_kill": """ã€ğŸŒ™ å¤œå¹•é™ä¸´ - ç‹¼äººè¡ŒåŠ¨ã€‘

{anti_hallucination}

{soul_setting}

{context}

{tactical_directive}

ã€å‡»æ€ç­–ç•¥åˆ†æã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸŒ™ ã€é¦–å¤œåˆ€äººã€‘ï¼ˆæ²¡æœ‰å‘è¨€ä¿¡æ¯æ—¶ï¼‰
æŒ‰ä½ç½®å­¦åˆ€äººï¼š
- 1-3å·ä½ï¼šå‘è¨€ä½ï¼Œå®¹æ˜“å‡ºé¢„è¨€å®¶/å¼ºç¥
- è¾¹ç¼˜ä½ç½®ï¼šå¯èƒ½æ˜¯å¥³å·«ï¼ˆå¥³å·«å–œæ¬¢èº²ï¼‰
- é¿å…åˆ€å¤ªè¾¹ç¼˜çš„æ°‘ï¼ˆæ˜¾å¾—åˆ€æ³•éšæœºï¼‰

â˜€ï¸ ã€éé¦–å¤œåˆ€äººã€‘ï¼ˆæœ‰å‘è¨€ä¿¡æ¯åï¼‰
ğŸ¯ å‡»æ€ä¼˜å…ˆçº§ï¼š
1.ã€é¢„è¨€å®¶ã€‘è·³äº†èº«ä»½ä¸”é€»è¾‘è‡ªæ´½çš„ï¼Œå¿…æ€ï¼
2.ã€å¥³å·«ã€‘æœ‰è§£è¯èƒ½æ•‘äººæœ‰æ¯’è¯åæ€ï¼Œå°½å¿«å¤„ç†
3.ã€å¼ºåŠ¿å¥½äººã€‘åœ¨å¸¦èŠ‚å¥ã€æœ‰å¨èƒçš„
4.ã€çŒäººã€‘æœ‰å¼€æªèƒ½åŠ›ï¼Œè°¨æ…é€‰æ‹©ï¼ˆå¯èƒ½åå™¬ï¼‰

ğŸ” åˆ¤æ–­ä¾æ®ï¼š
- è°è·³äº†é¢„è¨€å®¶ï¼ŸéªŒäººä¿¡æ¯å¯ä¿¡å—ï¼Ÿ
- è°çš„å‘è¨€æœ€æœ‰å¨èƒï¼Ÿåœ¨å¼•å¯¼ç¥¨å‹ï¼Ÿ
- è°å¯èƒ½æ˜¯å¥³å·«ï¼Ÿï¼ˆä½è°ƒä½†ç«‹åœºåšå®šçš„ï¼‰
- å“ªä¸ªä½ç½®è¢«åˆ€æ˜¾å¾—åˆ€æ³•åˆç†ï¼Ÿ

ğŸ’€ ã€è‡ªåˆ€æˆ˜æœ¯ã€‘ï¼ˆç‰¹æ®Šæƒ…å†µï¼‰
ä»€ä¹ˆæ—¶å€™è€ƒè™‘è‡ªåˆ€ï¼ˆåˆ€è‡ªå·±é˜Ÿå‹ï¼‰ï¼š
âœ… é¦–å¤œèµŒå¥³å·«æ•‘äºº â†’ é˜Ÿå‹è·å¾—"é“¶æ°´"èº«ä»½
âœ… åšåçœŸé¢„è¨€å®¶ â†’ è‡ªåˆ€åæ‚è·³ç»™çœŸé¢„è¨€å®¶å‘æŸ¥æ€
âš ï¸ é£é™©ï¼šå¥³å·«ä¸æ•‘é˜Ÿå‹å°±ç™½æ­»äº†ï¼

ğŸ¤ é˜Ÿå‹é…åˆï¼š
- å‚è€ƒé˜Ÿå‹çš„å¯†è°‹å»ºè®®
- å¦‚æœé˜Ÿå‹å·²æœ‰æ˜ç¡®ç›®æ ‡ï¼Œå°½é‡é…åˆ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯·åªå›å¤ä¸€ä¸ªæ•°å­—ï¼ˆ1-9çš„ç›®æ ‡ç¼–å·ï¼‰ï¼š""",

        # ç‹¼äººå¤œé—´å¯†è°‹
        "werewolf_chat": """ã€ğŸº ç‹¼äººå¯†è°‹ - åªæœ‰é˜Ÿå‹èƒ½çœ‹åˆ°ã€‘

{context}

ã€å¯†è°‹å†…å®¹å‚è€ƒã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’¬ å¯ä»¥è®¨è®ºï¼š
- ä»Šæ™šåˆ€è°ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
- ä½ è§‰å¾—é¢„è¨€å®¶/å¥³å·«æ˜¯è°ï¼Ÿ
- æ˜å¤©è°æ‚è·³é¢„è¨€å®¶ï¼Ÿè°æ½œæ°´ï¼Ÿ
- å½’ç¥¨ç­–ç•¥ï¼šæ¨å“ªä¸ªå¥½äººå‡ºå±€ï¼Ÿ

ğŸ­ æ˜å¤©é…åˆï¼š
- è°è´Ÿè´£è·³èº«ä»½ï¼Ÿ
- å…¶ä»–ç‹¼æ€ä¹ˆç«™é˜Ÿé…åˆï¼Ÿ
- ç¥¨å‹æ€ä¹ˆåˆ†æ•£ï¼Ÿ

âš ï¸ è¿™é‡Œå¯ä»¥è¯´çœŸè¯ï¼Œä½†ç™½å¤©ç»å¯¹ä¸èƒ½æåˆ°è¿™äº›å†…å®¹ï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{human_style}

è¯·ç®€çŸ­å‘è¨€ï¼ˆ30å­—å†…ï¼‰ï¼Œç›´æ¥è¯´ï¼š""",

        # é¢„è¨€å®¶éªŒäºº
        "seer_check": """ã€ğŸ”® é¢„è¨€å®¶éªŒäºº - é€‰æ‹©éªŒè¯ç›®æ ‡ã€‘

{anti_hallucination}

{soul_setting}

{context}

ã€æŸ¥éªŒå†³ç­–é€»è¾‘ - æŒ‰ä¼˜å…ˆçº§æ€è€ƒã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ ã€æ ¼å±€æµã€‘ï¼ˆä¼˜å…ˆï¼‰
è°æ˜¯åœºä¸Šçš„"ç„¦ç‚¹ç‰Œ"ï¼Ÿæ˜¨å¤©è°çš„å‘è¨€æœ€åƒåœ¨å¸¦èŠ‚å¥ï¼Ÿ
â†’ éªŒä»–ï¼Œå¯ä»¥è¿…é€Ÿç†æ¸…å±€åŠ¿
â†’ éªŒå‡ºç‹¼ç›´æ¥æ‹æ­»ï¼ŒéªŒå‡ºå¥½äººå¸®ä½ ç«™é˜Ÿ

ğŸ›¡ï¸ ã€é˜²å®ˆæµã€‘
è°æ˜¨å¤©ç–¯ç‹‚æ”»å‡»ä½ ï¼Ÿè´¨ç–‘ä½ çš„éªŒäººç»“æœï¼Ÿ
â†’ éªŒä»–ï¼å¦‚æœæ˜¯ç‹¼æ˜å¤©ç›´æ¥æ‰“æ­»
â†’ å¦‚æœæ˜¯å¥½äººï¼Œæ˜å¤©å¯ä»¥è¯´æœä»–ç«™ä½ 

ğŸŒŠ ã€æ·±æ°´æµã€‘
è°ä¸€ç›´ä¸è¯´è¯ã€åˆ’æ°´ã€å¼ƒç¥¨ï¼Ÿ
â†’ è¿™ç§äººæœ€å®¹æ˜“æ˜¯"æ·±æ°´å€’é’©ç‹¼"
â†’ éªŒä»–å¯ä»¥æ’é›·

âš ï¸ ã€é¿é›·æŒ‡å—ã€‘
- âŒ ç»å¯¹ä¸è¦éªŒæ­»äºº
- âŒ ä¸è¦éªŒåœºä¸Šå…¬è®¤çš„"é“å¥½äºº"ï¼ˆæµªè´¹ï¼‰
- âŒ ä¸è¦éªŒå·²ç»è¢«æŸ¥æ€çš„"æ˜ç‹¼"ï¼ˆæµªè´¹ï¼‰
- âŒ ä¸è¦é‡å¤éªŒåŒä¸€ä¸ªäºº
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯·åªå›å¤ä¸€ä¸ªæ•°å­—ï¼ˆ1-9çš„ç›®æ ‡ç¼–å·ï¼‰ï¼š""",

        # å¥³å·«ç”¨è¯
        "witch_action": """ã€ğŸ§ª å¥³å·«è¡ŒåŠ¨ - ç”¨è¯å†³ç­–ã€‘

{anti_hallucination}

{soul_setting}

{context}

ã€ä½ çš„è¯æ°´çŠ¶æ€ã€‘
{available_actions}

ã€ç”¨è¯å†³ç­–æŒ‡å—ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’Š è§£è¯ä½¿ç”¨ï¼š
âœ… åº”è¯¥æ•‘ï¼šé¦–å¤œï¼ˆé“¶æ°´ï¼‰ã€ç¡®è®¤çš„å¥½äººã€å¥½äººåŠ£åŠ¿æ—¶
âŒ ä¸æ•‘ï¼šè¢«åˆ€çš„åƒç‹¼ã€å¯èƒ½æ˜¯è‡ªåˆ€éª—è¯ã€æƒ³ç•™ç€ä¿æ›´é‡è¦çš„äºº

â˜ ï¸ æ¯’è¯ä½¿ç”¨ï¼š
âœ… å¯ä»¥æ¯’ï¼šé¢„è¨€å®¶éªŒå‡ºçš„ç‹¼ã€å¯¹è·³å¤±è´¥çš„å‡é¢„è¨€å®¶ã€å·²æš´éœ²çš„ç‹¼
âŒ ä¸æ¯’ï¼šä¸ç¡®å®šèº«ä»½ã€åœºä¸Šæ²¡å…±è¯†ã€è‡ªå·±ä¹Ÿè¢«æ€€ç–‘æ—¶

âš ï¸ é‡è¦ï¼šæ•‘å’Œæ¯’ä¸èƒ½åŒä¸€æ™šç”¨ï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯·å›å¤ï¼šæ•‘äºº / æ¯’äºº Xå· / ä¸æ“ä½œ""",

        # çŒäººå¼€æª
        "hunter_shoot": """ã€ğŸ”« çŒäººå¼€æª - æœ€åçš„å†³ç­–ã€‘

{anti_hallucination}

{soul_setting}

{context}

ã€å¼€æªå†³ç­–ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ… åº”è¯¥å¼€æªï¼š
- é¢„è¨€å®¶éªŒå‡ºçš„ç‹¼
- å¯¹è·³å¤±è´¥çš„å‡é¢„è¨€å®¶
- æŠ•ç¥¨è¡Œä¸ºæš´éœ²ç‹¼èº«ä»½çš„
- ä½ æœ‰å¾ˆå¤§æŠŠæ¡æ˜¯ç‹¼çš„

ğŸ¤” å¯ä»¥è€ƒè™‘å¼€æªï¼š
- å‘è¨€æœ€æ··ä¹±çš„
- å’ŒæŠ•ä½ çš„äººå¯¹ç€å¹²çš„ï¼ˆå¯èƒ½æ˜¯ç‹¼åšç¥¨ï¼‰
- ç›´è§‰æœ€åƒç‹¼çš„

âŒ ä¸å¼€æªï¼š
- å®Œå…¨æ²¡æŠŠæ¡ï¼Œæ€•æ‰“æ­»å¥½äºº
- å¥½äººä¼˜åŠ¿æ˜æ˜¾ï¼Œä¸éœ€è¦ä½ å¼€æª
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯·å›å¤ï¼šæ•°å­—ï¼ˆ1-9ï¼‰æˆ–"ä¸å¼€æª"ï¼š""",

        # ç™½å¤©å‘è¨€
        "day_speech": """ã€â˜€ï¸ ç™½å¤©å‘è¨€ - è½®åˆ°ä½ äº†ã€‘

{anti_hallucination}

{soul_setting}

{personality}

{context}

ã€å‘è¨€æŒ‡å¼•ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{speech_tips}

ğŸ“ å‘è¨€æ¡†æ¶ï¼š
1. å…ˆè‡ªæŠ¥ç¼–å·ï¼ˆå¦‚"Xå·å‘è¨€"ï¼‰ï¼Œè¿™æ˜¯åŸºæœ¬ç¤¼ä»ª
2. å¯¹æ˜¨æ™š/å½“å‰æƒ…å†µçš„çœ‹æ³•
3. ç‚¹è¯„å…¶ä»–ç©å®¶å‘è¨€ï¼Œè°å¯ç–‘ï¼Ÿè°å¯ä¿¡ï¼Ÿ
4. ä½ çš„ç«™é˜Ÿå’ŒæŠ•ç¥¨æ„å‘

âš ï¸ æ§åˆ¶åœ¨100å­—å†…ï¼ŒåƒçœŸäººèŠå¤©
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{human_style}

ç›´æ¥å‘è¨€ï¼ˆä¸è¦åŠ ä»»ä½•å‰ç¼€ï¼‰ï¼š""",

        # PKå‘è¨€ï¼ˆå¹³ç¥¨åï¼‰
        "pk_speech": """ã€âš”ï¸ PKå‘è¨€ - ç”Ÿæ­»å¯¹å†³ã€‘

{anti_hallucination}

{soul_setting}

{personality}

{context}

ã€PKå‘è¨€è¦ç‚¹ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä½ å’Œå¯¹æ‰‹å¹³ç¥¨äº†ï¼Œç°åœ¨æ˜¯PKå‘è¨€ç¯èŠ‚ã€‚
è¿™æ˜¯ä½ æœ€åçš„è‡ªè¯æœºä¼šï¼

{pk_tips}

ğŸ’ª ä½ éœ€è¦ï¼š
- ä¸ºè‡ªå·±è¾©æŠ¤ï¼Œè¯´æ˜ä½ ä¸æ˜¯ç‹¼çš„ç†ç”±
- æ”»å‡»å¯¹æ‰‹ï¼ŒæŒ‡å‡ºä»–çš„é—®é¢˜
- äº‰å–åœºä¸Šçš„ç¥¨

âš ï¸ æ§åˆ¶åœ¨60å­—å†…ï¼Œè¦æœ‰æ„Ÿæƒ…ï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{human_style}

ç›´æ¥å‘è¨€ï¼š""",

        # ç™½å¤©æŠ•ç¥¨
        "day_vote": """ã€ğŸ—³ï¸ æŠ•ç¥¨é˜¶æ®µã€‘

{anti_hallucination}

{soul_setting}

{context}

ã€æŠ•ç¥¨å†³ç­–ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{vote_tips}

ğŸ¯ æŠ•ç¥¨è¦ç‚¹ï¼š
- è¢«é¢„è¨€å®¶æŸ¥æ€çš„ â†’ ä¼˜å…ˆæŠ•
- å‘è¨€é€»è¾‘æœ€æ··ä¹±çš„ â†’ é‡ç‚¹å…³æ³¨
- è·³èº«ä»½å¤±è´¥çš„ â†’ åŸºæœ¬ç¡®è®¤
- åœºä¸Šå…¬è®¤å¯ç–‘çš„ â†’ è·Ÿä¸»æµ

âš–ï¸ è€ƒé‡ï¼š
- å½“å‰ç¥¨å‹æ˜¯ä»€ä¹ˆï¼Ÿ
- è·Ÿç¥¨è¿˜æ˜¯åšæŒè‡ªå·±ï¼Ÿ
- è¿™ä¸€ç¥¨ä¼šæ€ä¹ˆå½±å“å±€åŠ¿ï¼Ÿ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{human_style}

è¯·æŒ‰æ ¼å¼å›å¤ï¼ˆä¸¤è¡Œï¼‰ï¼š
[å‘è¨€]ä½ çš„çœ‹æ³•ï¼ˆ15å­—å†…ï¼‰
[æŠ•ç¥¨]æ•°å­— æˆ– å¼ƒç¥¨

ç¤ºä¾‹ï¼š
[å‘è¨€]3å·é€»è¾‘å¤ªæ··ä¹±äº†
[æŠ•ç¥¨]3""",

        # é—è¨€
        "last_words": """ã€ğŸ’€ é—è¨€ - æœ€åçš„å£°éŸ³ã€‘

{anti_hallucination}

{context}

ä½ è¢«æŠ•ç¥¨å‡ºå±€äº†ã€‚è¿™æ˜¯ä½ æœ€åçš„å‘è¨€æœºä¼šã€‚

ã€ä½ çš„çœŸå®èº«ä»½ï¼š{role_name}ã€‘

{last_words_tips}

ã€é—è¨€çš„ä½œç”¨ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
- è¿™æ˜¯ä½ æœ€åå½±å“å±€åŠ¿çš„æœºä¼š
- ç»™æ´»ç€çš„äººç•™ä¸‹æœ‰ä»·å€¼çš„ä¿¡æ¯
- è¡¨è¾¾ä½ çš„ç«‹åœºã€åˆ¤æ–­ã€æƒ…ç»ª

âš ï¸ æ§åˆ¶åœ¨50å­—å†…ï¼Œè¦æœ‰æ„Ÿæƒ…
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

{human_style}

è¯·å‘è¡¨é—è¨€ï¼š"""
    }

    # ==================== è§’è‰²å‘è¨€ç­–ç•¥ï¼ˆè¯¦ç»†ç‰ˆï¼‰ ====================
    SPEECH_TIPS = {
        "werewolf": """ã€ğŸº ç‹¼äººå‘è¨€ - ä¼ªè£…æ˜¯ç”Ÿå­˜ä¹‹é“ã€‘

â›” ç»å¯¹çº¢çº¿ï¼ˆè¯´äº†å°±æš´éœ²ï¼‰ï¼š
- æåˆ°å¤œæ™šå¯†è°‹çš„ä»»ä½•å†…å®¹
- è¯´"æˆ‘çŸ¥é“XXæ˜¯ç‹¼"è¿™ç§ç‹¼è§†è§’çš„è¯
- å¼•ç”¨é˜Ÿå‹å¤œæ™šè¯´çš„è¯
- è¡¨ç°å¾—çŸ¥é“è°æ˜¯ç‹¼äºº

ğŸ­ ã€èº«ä»½ä¼ªè£…é€‰æ‹©ã€‘

1ï¸âƒ£ ã€æ‚è·³é¢„è¨€å®¶ã€‘é«˜é£é™©é«˜æ”¶ç›Š
- æ—¶æœºï¼šæ¸¸æˆåˆšå¼€å§‹ï¼Œæˆ–é˜Ÿå‹è¢«çœŸé¢„è¨€å®¶æŸ¥æ€æ—¶
- æ€ä¹ˆåšï¼šå¿…é¡»æ¯”çœŸé¢„è¨€å®¶æ›´åƒï¼ç¼–é€ å®Œç¾çš„éªŒäººå¿ƒè·¯å†ç¨‹
- è¯æœ¯ï¼š"æˆ‘æ˜¯é¢„è¨€å®¶ï¼Œæ˜¨æ™šéªŒäº†Xå·æ˜¯é‡‘æ°´/æŸ¥æ€"
- è®°å¾—ç»™å¥½äººå‘é‡‘æ°´æ‹‰ç¥¨ï¼Œç»™çœŸé¢„è¨€å®¶å‘æŸ¥æ€

2ï¸âƒ£ ã€ç©¿ç¥èŒè¡£æœã€‘æŒ¡åˆ€/æ‰¾ç¥
- ç©¿å¥³å·«ï¼š"æˆ‘æ˜¯å¥³å·«ï¼Œæ˜¨æ™šå¹³å®‰å¤œï¼Œæˆ‘æ•‘äº†Xå·"
- ç©¿çŒäººï¼š"æˆ‘æ˜¯çŒäººï¼Œè°æ•¢ç¥¨æˆ‘ï¼Ÿ"
- ç›®çš„ï¼šé€¼çœŸç¥å‡ºæ¥æ‹ä½ ï¼Œæ‰¾åˆ°çœŸç¥ä½ç½®

3ï¸âƒ£ ã€è®¤å¹³æ°‘ã€‘ä½è°ƒæ½œä¼ï¼ˆæ¨èï¼‰
- æ—¶æœºï¼šé˜Ÿå‹åœ¨å†²é”‹ï¼Œä½ éœ€è¦åš"æ·±æ°´ç‹¼"
- è¯æœ¯ï¼š"æˆ‘å°±æ˜¯é—­çœ¼æ°‘ï¼Œæˆ‘çœ‹ä¸æ¸…å±€åŠ¿ï¼Œä½†æˆ‘æ„Ÿè§‰..."
- æœ€å®‰å…¨ï¼Œæ´»åˆ°æœ€åå± åŸ

ğŸ”„ ã€å€’é’©æˆ˜æœ¯ã€‘
è¢«æ€€ç–‘æ—¶å¯ä»¥è¸©é˜Ÿå‹åšé«˜è‡ªå·±ï¼š
- "æˆ‘ä¹Ÿè§‰å¾—Xå·æœ‰é—®é¢˜"ï¼ˆXæ˜¯ä½ é˜Ÿå‹ï¼‰
- ç‰ºç‰²é˜Ÿå‹æ¢å–ä¿¡ä»»

ğŸ’¡ å‘è¨€æŠ€å·§ï¼š
- è¡¨ç°å¾—åƒå¥½äººï¼šç§¯æåˆ†æã€æœ‰ç«‹åœºã€æ•¢å½’ç¥¨
- é€‚å½“æ€€ç–‘ä¸€ä¸ªå¥½äººï¼Œå¼•å¯¼ç¥¨å‹
- ä¸è¦å’Œé˜Ÿå‹äº’ä¿å¤ªæ˜æ˜¾""",

        "seer": """ã€ğŸ”® é¢„è¨€å®¶å‘è¨€ - å–ä¿¡äºäººã€‘

ğŸ“¢ è·³èº«ä»½æ—¶æœºï¼š
- æœ‰æŸ¥æ€ï¼šå»ºè®®ç›´æ¥è·³ï¼ŒæŠŠç‹¼æŒ‰æ­»
- æœ‰é‡‘æ°´ï¼šå¯è·³å¯æ½œï¼Œçœ‹å±€åŠ¿
- è¢«å¯¹è·³ï¼šå¿…é¡»è·³å‡ºæ¥å¯¹çº¿

ğŸ—£ï¸ å‘è¨€è¦ç‚¹ï¼š
- æŠ¥éªŒäººè¦åšå®šï¼Œä¸èƒ½åååå
- è§£é‡Šä½ çš„éªŒäººé€»è¾‘
- è¢«å¯¹è·³æ—¶ï¼Œä»è¿™äº›è§’åº¦æ‹†å¯¹æ–¹ï¼š
  Â· éªŒäººé¡ºåºåˆç†å—ï¼Ÿ
  Â· å‘è¨€é€»è¾‘æœ‰æ¼æ´å—ï¼Ÿ
  Â· ä»–çš„é‡‘æ°´è¡¨ç°åƒå¥½äººå—ï¼Ÿ

ğŸ¯ è­¦å¾½æµï¼ˆå¦‚æœä½ è¦æ­»äº†ï¼‰ï¼š
- æŠ¥å‡ºæ‰€æœ‰éªŒäººç»“æœ
- è¯´æ˜ä¸‹ä¸€æ™šåº”è¯¥éªŒè°
- æŠŠè­¦å¾½ä¼ ç»™ä½ ä¿¡ä»»çš„äºº""",

        "witch": """ã€ğŸ§ª å¥³å·«å‘è¨€ - éšè—æ˜¯ä¿æŠ¤ã€‘

â›” ç»å¯¹çº¢çº¿ï¼ˆæš´éœ²èº«ä»½çš„è¯ï¼‰ï¼š
- "æ˜¨æ™šXXè¢«åˆ€äº†" - åªæœ‰å¥³å·«çŸ¥é“è°è¢«åˆ€
- "æˆ‘æ•‘äº†XX" - æš´éœ²è§£è¯
- "æˆ‘æ‰‹é‡Œæœ‰æ¯’/æ²¡æ¯’" - æš´éœ²èº«ä»½
- ä»»ä½•è¡¨ç°å‡ºçŸ¥é“å¤œæ™šä¿¡æ¯çš„è¯

ğŸ­ æ­£ç¡®çš„å‘è¨€æ–¹å¼ï¼š
- ä»¥æ™®é€šæ‘æ°‘è§†è§’å‘è¨€
- æ­£å¸¸åˆ†æå‘è¨€é€»è¾‘
- ç«™é˜Ÿç†ç”±æ˜¯"ä»–é€»è¾‘æ¸…æ™°"ä¸æ˜¯"æˆ‘çŸ¥é“ä»–æ˜¯çœŸçš„"

ğŸ“¢ ä»€ä¹ˆæ—¶å€™è·³å¥³å·«ï¼š
- é¢„è¨€å®¶æ­»äº†ï¼Œåœºä¸Šç¼ºä¸»å¿ƒéª¨
- ä½ è¢«å½“ç‹¼äººè¦å‡ºå±€äº†
- å±€åŠ¿éœ€è¦ä½ ç¨³å®š""",

        "hunter": """ã€ğŸ”« çŒäººå‘è¨€ - å¨æ…‘ä¸éšè—ã€‘

ğŸ­ èº«ä»½ç­–ç•¥ï¼š
- å¹³æ—¶ä»¥æ‘æ°‘è§†è§’å‘è¨€ï¼Œä¸æš´éœ²èº«ä»½
- æš´éœ²åå®¹æ˜“è¢«é’ˆå¯¹ï¼ˆè¢«æ¯’å°±ä¸èƒ½å¼€æªï¼‰

ğŸ—£ï¸ å‘è¨€è¦ç‚¹ï¼š
- ç§¯æåˆ†æå±€åŠ¿
- æœ‰è‡ªå·±çš„åˆ¤æ–­
- å¸®åŠ©è¾¨åˆ«é¢„è¨€å®¶çœŸå‡

âš¡ ä»€ä¹ˆæ—¶å€™è·³çŒäººï¼š
- è¢«å†²ç¥¨è¦å‡ºå±€æ—¶ï¼Œè·³èº«ä»½åå‹
- å¯¹æ–¹æ˜¯ç¡®å®šçš„ç‹¼ï¼Œè·³äº†å¨æ…‘
- è¡¨ç°å¾—å¼ºåŠ¿ä¸€äº›ï¼š"è°æ•¢ç¥¨æˆ‘æˆ‘å°±å´©è°"ï¼ˆæµ‹è¯•ååº”ï¼‰""",

        "villager": """ã€ğŸ‘¨â€ğŸŒ¾ æ‘æ°‘å‘è¨€ - å¹³å‡¡ä½†é‡è¦ã€‘

ğŸ’ª ä½ çš„ä»·å€¼ï¼š
- å‘è¨€å’ŒæŠ•ç¥¨æ˜¯ä½ çš„æ­¦å™¨
- å¸®åŠ©åˆ†è¾¨é¢„è¨€å®¶çœŸå‡
- æ‰¾å‡ºç‹¼äºº

ğŸ—£ï¸ å‘è¨€æ¡†æ¶ï¼š
1. è¡¨æ€ï¼šå¯¹å½“å‰æƒ…å†µçš„çœ‹æ³•
2. åˆ†æï¼šè°çš„å‘è¨€æœ‰é—®é¢˜ï¼Ÿ
3. ç«™é˜Ÿï¼šæ”¯æŒå“ªä¸ªé¢„è¨€å®¶ï¼Ÿ
4. å½’ç¥¨ï¼šå»ºè®®æŠ•è°

ğŸ’¡ æŠ€å·§ï¼š
- ä¸è¦å¤ªæ²‰é»˜ï¼Œä¼šè¢«å½“ç‹¼ç¥¨
- ä¹Ÿä¸è¦å¤ªè·³ï¼Œä¼šè¢«ç‹¼åˆ€
- æœ‰ç†æœ‰æ®è¡¨è¾¾è§‚ç‚¹
- æ•¢äºç«™é˜Ÿå’Œå½’ç¥¨"""
    }

    # ==================== è§’è‰²æŠ•ç¥¨ç­–ç•¥ ====================
    VOTE_TIPS = {
        "werewolf": """ã€ğŸº ç‹¼äººæŠ•ç¥¨ - éšè—ä¸æ¨è¿›ã€‘

â›” å‘è¨€çº¢çº¿ï¼ˆåŒä¸Šï¼‰ï¼šä¸èƒ½æå¯†è°‹ã€ä¸èƒ½æš´éœ²é˜Ÿå‹

ğŸ¯ æŠ•ç¥¨ç›®æ ‡ï¼š
1. é¢„è¨€å®¶ï¼ˆå°¤å…¶éªŒåˆ°ä½ ä»¬çš„ï¼‰
2. å¼ºåŠ¿å¥½äººï¼ˆåœ¨å¸¦èŠ‚å¥çš„ï¼‰
3. é˜Ÿå‹é…åˆçš„ç›®æ ‡

ğŸ’¡ æŠ€å·§ï¼š
- ä¸è¦å’Œé˜Ÿå‹ç¥¨å‹å®Œå…¨ä¸€è‡´ï¼ˆæ˜“è¢«ä¸€é”…ç«¯ï¼‰
- å¯ä»¥è·Ÿä¸»æµéšè—èº«ä»½
- å¿…è¦æ—¶å¯ä»¥ç¥¨é˜Ÿå‹æ¢ä¿¡ä»»ï¼ˆç‰ºç‰²æˆ˜æœ¯ï¼‰
- å‘è¨€è¦åƒå¥½äººï¼šæœ‰é€»è¾‘ã€æœ‰ç«‹åœº""",

        "seer": """ã€ğŸ”® é¢„è¨€å®¶æŠ•ç¥¨ - åšå®šå¼•å¯¼ã€‘

ğŸ¯ æŠ•ç¥¨ä¼˜å…ˆçº§ï¼š
1. ä½ éªŒå‡ºçš„ç‹¼ï¼ˆå¿…æŠ•ï¼‰
2. å¯¹è·³ä½ çš„å‡é¢„è¨€å®¶
3. ä¿æŠ¤ä½ çš„é‡‘æ°´

ğŸ’¡ æ³¨æ„ï¼š
- ä½ çš„æŠ•ç¥¨å¾ˆæœ‰å¼•å¯¼ä½œç”¨ï¼Œè¦åšå®š
- æ³¨æ„è°åœ¨åšä½ çš„ç¥¨ï¼ˆå¯èƒ½æ˜¯ç‹¼åŒä¼™ï¼‰
- ä¿æŠ¤å¥½ä½ çš„é‡‘æ°´""",

        "witch": """ã€ğŸ§ª å¥³å·«æŠ•ç¥¨ - éšè—è§†è§’ã€‘

ğŸ¯ æŠ•ç¥¨æ€è·¯ï¼š
- è·Ÿéšä½ è®¤å¯çš„é¢„è¨€å®¶
- é¢„è¨€å®¶å­˜ç–‘åˆ™ç‹¬ç«‹åˆ†æ

ğŸ’¡ æ³¨æ„ï¼š
- ä¸è¦æš´éœ²å¥³å·«è§†è§’
- åƒæ™®é€šæ‘æ°‘ä¸€æ ·æŠ•ç¥¨
- ä¿æŠ¤å¥½é¢„è¨€å®¶å’Œå¥½äºº""",

        "hunter": """ã€ğŸ”« çŒäººæŠ•ç¥¨ - ç‹¬ç«‹åˆ¤æ–­ã€‘

ğŸ¯ æŠ•ç¥¨æ€è·¯ï¼š
- ç‹¬ç«‹åˆ†æï¼Œä¸ç›²ç›®è·Ÿç¥¨
- æŠ•ä½ è®¤ä¸ºæœ€å¯ç–‘çš„

ğŸ’¡ æ³¨æ„ï¼š
- è€ƒè™‘è¢«æŠ•å‡ºå»æ—¶å¼€æªå¸¦è°
- å¯ä»¥é€šè¿‡æŠ•ç¥¨è¡¨æ˜ç«‹åœº
- è¢«å†²ç¥¨æ—¶è·³èº«ä»½åå‹""",

        "villager": """ã€ğŸ‘¨â€ğŸŒ¾ æ‘æ°‘æŠ•ç¥¨ - è·Ÿå¯¹é˜Ÿå‹ã€‘

ğŸ¯ æŠ•ç¥¨æ€è·¯ï¼š
- ä¼˜å…ˆç›¸ä¿¡é€»è¾‘æ¸…æ™°çš„é¢„è¨€å®¶
- åˆ†æå‘è¨€æ‰¾å¯ç–‘çš„äºº

ğŸ’¡ æ³¨æ„ï¼š
- ä½ çš„ç¥¨å¾ˆé‡è¦ï¼Œä¸è¦è½»æ˜“å¼ƒç¥¨
- æ³¨æ„æ‹†è§£æŠ±å›¢æŠ•ç¥¨ï¼ˆå¯èƒ½æ˜¯ç‹¼ï¼‰
- æ•¢äºè¡¨è¾¾ç«‹åœº"""
    }

    # ==================== PKå‘è¨€ç­–ç•¥ï¼ˆç”Ÿæ­»å¯¹å†³ï¼‰ ====================
    PK_TIPS = {
        "werewolf": """ã€ğŸº ç‹¼äººPK - æœ€åçš„è¡¨æ¼”ã€‘

ğŸ­ å¿ƒæ€ï¼šå§”å±ˆã€æ— è¾œã€å€’æ‰“ä¸€è€™
ä½ ä¸æ•¢ç›¸ä¿¡å¤§å®¶ç«Ÿç„¶æ€€ç–‘ä½ è¿™ä¸ª"å¥½äºº"ã€‚

ğŸ’¬ æ ¸å¿ƒè¯æœ¯ï¼š
- "æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆå¤§å®¶è¦æŠ•æˆ‘ï¼Œä½†æˆ‘åº•ç‰Œæ˜¯å¥½äºº"
- "å¯¹é¢Xå·åˆšæ‰çš„å‘è¨€æ˜æ˜¾æ˜¯åœ¨å·æ¢æ¦‚å¿µ"
- "å¦‚æœä½ ä»¬æƒ³è¾“ï¼Œå°±å‡ºæˆ‘å§"

ğŸ¯ æˆ˜æœ¯é€‰æ‹©ï¼š
1.ã€åšåŒæƒ…ã€‘å‡è£…æ„¿æ„ç‰ºç‰²ï¼š"è¡Œå§ï¼Œä½ ä»¬è¦å‡ºæˆ‘å°±å‡ºæˆ‘ï¼Œåæ­£æˆ‘æ˜¯å¥½äºº"
2.ã€ç–¯ç‹‚æ”»å‡»ã€‘æŠ“ä½å¯¹æ‰‹å‘è¨€çš„å¾®å°æ¼æ´æ— é™æ”¾å¤§
3.ã€å®šç‹¼å¯¹æ–¹ã€‘"ä»–å°±æ˜¯ç‹¼ï¼åˆšæ‰é‚£ä¸ªå‘è¨€å·²ç»æš´éœ²äº†ï¼"

âš ï¸ åƒä¸‡ä¸è¦æ…Œï¼Œè¶Šæ…Œè¶Šåƒç‹¼""",

        "seer": """ã€ğŸ”® é¢„è¨€å®¶PK - ç”¨æŸ¥éªŒè¯´è¯ã€‘

ğŸ­ å¿ƒæ€ï¼šæ„¤æ€’ã€æ€¥åˆ‡ã€ä¸å¯ç½®ä¿¡
ä½ ä¸æ•¢ç›¸ä¿¡å¤§å®¶ç«Ÿç„¶åˆ†ä¸æ¸…çœŸå‡é¢„è¨€å®¶ã€‚

ğŸ’¬ æ ¸å¿ƒè¯æœ¯ï¼š
- "æˆ‘éƒ½èŠæˆè¿™æ ·äº†è¿˜èƒ½å¹³ç¥¨ï¼Ÿ"
- "åˆšæ‰å†²ç¥¨ç»™Xå·çš„ï¼Œä½ ä»¬å¿ƒé‡Œæ²¡ç‚¹æ•°å—ï¼Ÿ"
- "å…¨åœºå¥½äººç»™æˆ‘å¬æ¸…æ¥šï¼Œä»Šå¤©ä¸å‡ºXå·ï¼Œå¥½äººç›´æ¥äº¤ç‰Œï¼"

ğŸ¯ å¿…é¡»åšçš„ï¼š
1. å†æ¬¡å¼ºè°ƒä½ çš„éªŒäººä¿¡æ¯å’Œé€»è¾‘
2. æ‹†è§£å¯¹æ–¹çš„é€»è¾‘æ¼æ´
3. æŒ‡å‡ºæŠ•å¯¹æ‰‹çš„äººé‡Œä¸€å®šæœ‰ç‹¼é…åˆ
4. æ°”åŠ¿è¦è¶³ï¼Œä¸èƒ½å¼±ï¼""",

        "witch": """ã€ğŸ§ª å¥³å·«PK - å…³é”®æŠ‰æ‹©ã€‘

ğŸ­ å¿ƒæ€ï¼šå†·é™åˆ†æï¼Œå¿…è¦æ—¶è·³èº«ä»½

ğŸ’¬ ç­–ç•¥é€‰æ‹©ï¼š
1.ã€ç»§ç»­éšè—ã€‘å¦‚æœä¸è·³èƒ½èµ¢ï¼Œç»§ç»­æ‘æ°‘è§†è§’è¾©æŠ¤
2.ã€è·³å¥³å·«è‡ªè¯ã€‘è¢«é€¼åˆ°ç»å¢ƒæ—¶ï¼š
   - "æˆ‘æ˜¯å¥³å·«ï¼Œæ˜¨æ™šXXè¢«åˆ€æˆ‘æ•‘äº†/æ²¡æ•‘"
   - "æ¯’è¯è¿˜åœ¨/å·²ç”¨ï¼Œæˆ‘ä¸å¯èƒ½æ˜¯ç‹¼"
3.ã€æ”»å‡»å¯¹æ‰‹ã€‘æŒ‡å‡ºå¯¹æ–¹å‘è¨€çš„å¯ç–‘ä¹‹å¤„

âš ï¸ è·³èº«ä»½æ˜¯æœ€åæ‰‹æ®µï¼Œè·³äº†å°±æš´éœ²äº†""",

        "hunter": """ã€ğŸ”« çŒäººPK - å¨æ…‘åå‹ã€‘

ğŸ­ å¿ƒæ€ï¼šå¼ºåŠ¿ã€ä¸æ€•æ­»

ğŸ’¬ æ ¸å¿ƒè¯æœ¯ï¼š
- "ç¥¨æˆ‘å‡ºå»æˆ‘å°±å´©äº†å¯¹é¢ï¼"
- "æˆ‘æ˜¯çŒäººï¼Œè°æ•¢ç¥¨æˆ‘ï¼Ÿ"
- "ä½ ä»¬è¦æ˜¯æŠ•é”™äº†ï¼Œæˆ‘å¼€æªå¸¦èµ°Xå·ï¼Œå¥½äººè¡€äº"

ğŸ¯ æˆ˜æœ¯é€‰æ‹©ï¼š
1.ã€è·³èº«ä»½å¨æ…‘ã€‘è®©å¯¹æ–¹ä¸æ•¢å’Œä½ å¯¹ç¥¨
2.ã€ç»§ç»­éšè—ã€‘å¦‚æœè§‰å¾—èƒ½èµ¢å°±ä¸è·³
3.ã€è¡¨ç°å§”å±ˆã€‘"æˆ‘ä¸€ä¸ªçŒäººè¢«ä½ ä»¬è¿™ä¹ˆå†¤æ‰"

âš ï¸ è·³äº†çŒäººåï¼Œç‹¼äººå¯èƒ½ä¼šè®©å¥³å·«æ¯’ä½ """,

        "villager": """ã€ğŸ‘¨â€ğŸŒ¾ æ‘æ°‘PK - æ®ç†åŠ›äº‰ã€‘

ğŸ­ å¿ƒæ€ï¼šæ„¤æ€’ã€å§”å±ˆã€ä¸ç”˜

ğŸ’¬ æ ¸å¿ƒè¯æœ¯ï¼š
- "æˆ‘å°±æ˜¯ä¸€ä¸ªæ‘æ°‘ï¼Œæˆ‘èƒ½æœ‰ä»€ä¹ˆåå¿ƒæ€ï¼Ÿ"
- "å¯¹é¢é‚£ä¸ªå‘è¨€æ˜æ˜¾åœ¨å¸¦èŠ‚å¥ï¼"
- "ä½ ä»¬è¦æ˜¯å‡ºäº†æˆ‘ï¼Œå¥½äººå°‘ä¸€ç¥¨ï¼Œæƒ³æ¸…æ¥š"

ğŸ¯ å¿…é¡»åšçš„ï¼š
1. å¼ºè°ƒä½ ä¹‹å‰çš„å‘è¨€å’Œé€»è¾‘
2. æ”»å‡»å¯¹æ‰‹çš„å¯ç–‘ç‚¹
3. è¡¨ç°å‡ºå¥½äººè¢«å†¤æ‰çš„å§”å±ˆ
4. äº‰å–åœºä¸ŠåŒæƒ…ç¥¨"""
    }

    # ==================== é—è¨€ç­–ç•¥ ====================
    LAST_WORDS_TIPS = {
        "werewolf": """ã€ğŸº ç‹¼äººé—è¨€ - æœ€åçš„è¡¨æ¼”ã€‘

ä½ å¯ä»¥é€‰æ‹©ï¼š
1.ã€ç»§ç»­ä¼ªè£…ã€‘è£…å¯æ€œï¼š"æˆ‘æ˜¯å¥½äººå•Šï¼Œä½ ä»¬æŠ•é”™äººäº†ï¼"
2.ã€æ··æ·†è§†å¬ã€‘ä¹±æŒ‡ä¸€ä¸ªå¥½äººæ˜¯ç‹¼é˜Ÿå‹
3.ã€å‘æ³„ä¸æ»¡ã€‘æ‰°ä¹±åœºä¸Šåˆ¤æ–­
4.ã€æ²‰é»˜ã€‘ä¸ç»™ä»»ä½•ä¿¡æ¯

âš ï¸ ä¸è¦ç›´æ¥æ‰¿è®¤ç‹¼èº«ä»½ï¼Œä¹Ÿä¸è¦æš´éœ²é˜Ÿå‹""",

        "seer": """ã€ğŸ”® é¢„è¨€å®¶é—è¨€ - è­¦å¾½æµä¸ä¿¡æ¯ä¼ æ‰¿ã€‘

ğŸ“¢ ä½ å¿…é¡»æ¸…æ™°åœ°å‘Šè¯‰å¥½äººä»¥ä¸‹ä¿¡æ¯ï¼š

1ï¸âƒ£ ã€æŠ¥æŸ¥éªŒã€‘æŠ¥å‡ºæ‰€æœ‰éªŒäººç»“æœï¼
- "æˆ‘ç¬¬ä¸€æ™šéªŒäº†Xå·ï¼Œæ˜¯é‡‘æ°´/æŸ¥æ€"
- "ç¬¬äºŒæ™šéªŒäº†Yå·ï¼Œæ˜¯é‡‘æ°´/æŸ¥æ€"

2ï¸âƒ£ ã€è­¦å¾½æµã€‘å®‰æ’èº«åäº‹ï¼ˆéå¸¸é‡è¦ï¼ï¼‰
æ¨¡æ¿Aï¼š"ä»Šæ™šéªŒAï¼Œå¦‚æœæˆ‘æ­»äº†ï¼ŒAæ˜¯é‡‘æ°´è­¦å¾½ç»™Aï¼›Aæ˜¯æŸ¥æ€è­¦å¾½æ’•æ‰"
æ¨¡æ¿Bï¼š"è­¦å¾½æµç•™åœ¨Xå·ï¼Œä»–æ˜¯æˆ‘çš„é‡‘æ°´ï¼Œè®©ä»–å¸¦é˜Ÿ"

3ï¸âƒ£ ã€ç‚¹ç‹¼ã€‘å‘Šè¯‰å¤§å®¶ä½ è®¤ä¸ºè°æ˜¯ç‹¼
- åˆ†æä½ è®¤ä¸ºæœ€å¯ç–‘çš„ç©å®¶
- ç»™å¥½äººç•™ä¸‹æ–¹å‘

âš ï¸ è­¦å¾½æ˜¯ä½ æ­»åå”¯ä¸€çš„å¯¹è¯å·¥å…·ï¼
åƒä¸‡ä¸è¦æŠŠè­¦å¾½ç•™ç»™æœªæŸ¥éªŒçš„äººï¼""",

        "witch": """ã€ğŸ§ª å¥³å·«é—è¨€ - å…¬å¼€ä½ çš„ä¿¡æ¯ã€‘

ä½ å¯ä»¥è¯´ï¼š
1. å…¬å¼€ç”¨è¯æƒ…å†µï¼šæ•‘è¿‡è°/æ¯’è¿‡è°/è¿˜å‰©ä»€ä¹ˆè¯
2. å‘Šè¯‰å¤§å®¶è°è¢«åˆ€è¿‡
3. ä½ å¯¹åœºä¸Šå±€åŠ¿çš„åˆ¤æ–­
4. è°æœ€å¯ç–‘

å¸®åŠ©å¥½äººç†æ¸…å¤œæ™šä¿¡æ¯""",

        "hunter": """ã€ğŸ”« çŒäººé—è¨€ - è§£é‡Šä½ çš„é€‰æ‹©ã€‘

è¯´æ˜ï¼š
1. ä½ å¼€æª/ä¸å¼€æªçš„ç†ç”±
2. ä½ å¯¹åœºä¸Šå±€åŠ¿çš„åˆ¤æ–­
3. è°æœ€å¯ç–‘
4. ç»™å‰©ä¸‹çš„å¥½äººå»ºè®®""",

        "villager": """ã€ğŸ‘¨â€ğŸŒ¾ æ‘æ°‘é—è¨€ - ç•™ä¸‹ä½ çš„åˆ¤æ–­ã€‘

ä½ åº”è¯¥ï¼š
1. è¡¨è¾¾ä½ çš„ç«‹åœºå’Œåˆ¤æ–­
2. å‘Šè¯‰å¤§å®¶ä½ è§‰å¾—è°æ˜¯ç‹¼
3. å¸®åŠ©å¥½äººå»ºç«‹é€»è¾‘é“¾
4. å¯ä»¥å–Šå†¤æˆ–è¡¨è¾¾ä¸æ»¡

è®©ä½ çš„æ­»æœ‰ä»·å€¼ï¼"""
    }

    # ==================== å±€åŠ¿æ„ŸçŸ¥æ¨¡æ¿ ====================
    SITUATION_AWARENESS = """ã€ğŸ“Š å½“å‰å±€åŠ¿ã€‘
å­˜æ´»: {alive_count}äºº (å¥½äººçº¦{good_count}ï¼Œç‹¼äººçº¦{wolf_count})
æ€åŠ¿: {situation}
"""

    # ==================== åŠ¨æ€æˆ˜æœ¯æŒ‡ä»¤ï¼ˆæ ¹æ®å±€åŠ¿ç”Ÿæˆï¼‰ ====================
    TACTICAL_DIRECTIVES = {
        "wolf_advantage": """ã€âš”ï¸ æˆ˜æœ¯æŒ‡ä»¤ï¼šç‹¼äººä¼˜åŠ¿ - å‡†å¤‡å± åŸï¼ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”¥ å±€åŠ¿åˆ†æï¼šç¥èŒåªå‰©1ä¸ªæˆ–å¹³æ°‘ä¸è¶³ï¼Œç‹¼äººå³å°†è·èƒœï¼
ğŸ¯ è¡ŒåŠ¨æŒ‡ä»¤ï¼š
- ä¸éœ€è¦å†ä¼ªè£…äº†ï¼Œç›´æ¥æ‘Šç‰Œï¼
- æ‰€æœ‰ç‹¼äººä¸€èµ·å†²ç¥¨ï¼ŒæŠŠæœ€åçš„å¥½äººæŠ•å‡ºå»
- ç»‘ç¥¨ï¼æ§åœºï¼ä¸è¦å†èŠé€»è¾‘äº†
- å¯ä»¥è¯´ï¼š"ç‹¼äººæ§åœºï¼Œäº¤ç‰Œå§"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "wolf_disadvantage": """ã€ğŸ›¡ï¸ æˆ˜æœ¯æŒ‡ä»¤ï¼šç‹¼äººåŠ£åŠ¿ - å­¤ç‹¼ä½œæˆ˜ï¼ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ å±€åŠ¿åˆ†æï¼šé˜Ÿå‹å¤§é‡å‡ºå±€ï¼Œåœºä¸Šè¿˜æœ‰ç¥èŒï¼Œéå¸¸å±é™©ï¼
ğŸ¯ è¡ŒåŠ¨æŒ‡ä»¤ï¼š
- å€’é’©ï¼ä½ å¿…é¡»æ¯”å¥½äººè¿˜åƒå¥½äºº
- å¸¦å¤´è¸©æ­»ä½ çš„ç‹¼é˜Ÿå‹ï¼ˆå“ªæ€•æ˜¯å°¸ä½“ï¼‰
- å®Œå…¨ç«™è¾¹çœŸé¢„è¨€å®¶ï¼Œç¥ˆç¥·èƒ½æ´»åˆ°æ™šä¸Š
- æ´»ä¸‹å»æ‰æœ‰æœºä¼šåˆ€æ­»ç¥èŒç¿»ç›˜
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "wolf_teammate_exposed": """ã€ğŸš¨ æˆ˜æœ¯æŒ‡ä»¤ï¼šé˜Ÿå‹è¢«æŸ¥æ€ï¼ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ ç´§æ€¥æƒ…å†µï¼šé˜Ÿå‹è¢«é¢„è¨€å®¶ç‚¹åæŸ¥æ€ï¼
ğŸ¯ è¡ŒåŠ¨é€‰æ‹©ï¼š
1.ã€æ‚è·³ä¿é˜Ÿå‹ã€‘è·³é¢„è¨€å®¶å¯¹è·³ï¼Œç»™çœŸé¢„è¨€å®¶å‘æŸ¥æ€
2.ã€æœæ–­å–é˜Ÿå‹ã€‘"æˆ‘ä¹Ÿè§‰å¾—ä»–æœ‰é—®é¢˜"ï¼Œåšé«˜è‡ªå·±
3.ã€å†²ç¥¨é¢„è¨€å®¶ã€‘å·å¬å¤§å®¶æŠ•çœŸé¢„è¨€å®¶

é€‰æ‹©å–å†³äºä½ çš„åˆ¤æ–­å’Œèƒ†é‡ï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "good_confused": """ã€ğŸ˜µ æˆ˜æœ¯æŒ‡ä»¤ï¼šå¥½äººè¿·èŒ«å±€ï¼ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š å±€åŠ¿åˆ†æï¼šé¢„è¨€å®¶å·²æ­»æˆ–å­˜ç–‘ï¼Œæ²¡äººå¸¦é˜Ÿï¼Œåœºä¸Šæ··ä¹±
ğŸ¯ è¡ŒåŠ¨æŒ‡ä»¤ï¼š
- æµ‘æ°´æ‘¸é±¼ï¼åˆ¶é€ æ›´å¤šæ··ä¹±
- è´¨ç–‘é‚£ä¸ªæœ€åƒå¸¦å¤´å¤§å“¥çš„äºº
- è®©å¥½äººäº’æ‰“ï¼Œä½ åæ”¶æ¸”ç¿ä¹‹åˆ©
- å¯ä»¥å‡è£…åœ¨åˆ†æï¼Œå®é™…åœ¨å¸¦èŠ‚å¥
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "normal": """ã€ğŸ“‹ æˆ˜æœ¯æŒ‡ä»¤ï¼šæ­£å¸¸å¯¹å±€ã€‘
ä¿æŒå†·é™ï¼ŒæŒ‰ç…§æ­£å¸¸ç­–ç•¥è¡ŒåŠ¨ã€‚
ä¼ªè£…å¥½è‡ªå·±ï¼Œé…åˆé˜Ÿå‹ï¼Œæ‰¾æœºä¼šæ¨å¥½äººå‡ºå±€ã€‚
""",

        # ==================== ç»å¢ƒå±€æˆ˜æœ¯ï¼ˆå¥½äººè§†è§’ï¼‰ ====================
        "good_desperate": """ã€ğŸ†˜ ç»å¢ƒæˆ˜æœ¯æŒ‡ä»¤ï¼šå¥½äººå­¤æ³¨ä¸€æ·ï¼ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âš ï¸ å±€åŠ¿åˆ†æï¼šæåº¦å±é™©ï¼å¥½äººå†æ¨é”™ä¸€äººå°±è¾“äº†ï¼

ğŸ§  ã€æ€ç»´è½¬å˜ - å¿…é¡»å‰‘èµ°åé”‹ã€‘
âŒ æ”¾å¼ƒå¹³åº¸é€»è¾‘ï¼šä¸è¦å†ç›˜"è°åˆ’æ°´æ˜¯ç‹¼"äº†ï¼Œåˆ’æ°´çš„å¯èƒ½æ˜¯å“å‚»çš„å¹³æ°‘
âœ… æ‰¾æ·±æ°´ç‹¼ï¼šæŠŠç›®å…‰é”å®šåœ¨é‚£ä¸ªã€å‘è¨€æœ€å®Œç¾ã€æœ€æŒ‘ä¸å‡ºæ¯›ç—…ã€å…¨åœºèº«ä»½æœ€é«˜ã€‘çš„äººï¼
   â†’ åªæœ‰å€’é’©ç‹¼ï¼ˆæ·±æ°´ç‹¼ï¼‰æ‰èƒ½æ´»åˆ°ç°åœ¨ä¸è¢«æ€€ç–‘

ğŸ’¬ ç…½åŠ¨è¯æœ¯ï¼š
"å¦‚æœä¸æä¸€æŠŠï¼Œæˆ‘ä»¬å¿…è¾“ï¼æˆ‘çŸ¥é“Xå·ä¸€ç›´åƒå¥½äººï¼Œä½†å¦‚æœä»–æ˜¯ç‹¼ï¼Œæˆ‘ä»¬å°±å…¨å®Œäº†ã€‚
ä»Šå¤©æˆ‘å»ºè®®å…¨ç¥¨ä¸‹Xå·ï¼Œè¾“äº†æˆ‘èƒŒé”…ï¼"

ğŸ¯ è¡ŒåŠ¨æŒ‡ä»¤ï¼š
1. è´¨ç–‘åœºä¸Š"èº«ä»½æœ€é«˜"çš„äººï¼ˆè¶Šå®Œç¾è¶Šå¯ç–‘ï¼‰
2. ç…½åŠ¨å…¶ä»–å¥½äººä¸€èµ·èµŒä¸€æŠŠ
3. ç”¨æ°”åŠ¿å‹åˆ¶ï¼Œä¸è¦å†è®²é“ç†
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        # ==================== ç»å¢ƒå±€æˆ˜æœ¯ï¼ˆç‹¼äººè§†è§’ï¼‰ ====================
        "wolf_final_push": """ã€ğŸ† ç»å¢ƒæˆ˜æœ¯æŒ‡ä»¤ï¼šç‹¼äººç¨³ä½æ”¶å‰²ï¼ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”¥ å±€åŠ¿åˆ†æï¼šåªè¦å†æŠ—æ¨ä¸€ä¸ªå¥½äººå°±èµ¢äº†ï¼

ğŸ§  ã€å¿ƒæ€å»ºè®¾ - ç¨³ä½åˆ«æµªã€‘
âš ï¸ å¥½äººå¯èƒ½å¼€å§‹å­¤æ³¨ä¸€æ·ï¼Œä¼šä¹±çŒœæ·±æ°´ç‹¼
âœ… è¿™æ—¶å€™è¦è¡¨ç°å¾—æ¯”å¥½äººè¿˜æ€¥ï¼Œè¿˜æƒ³èµ¢

ğŸ¯ è¡ŒåŠ¨æŒ‡ä»¤ï¼š
1.ã€æ§åˆ¶ç¥¨å‹ã€‘ä¸è¦æ€¥ç€å†²ç¥¨ï¼Œå¦‚æœå¥½äººå†…è®§å°±åˆ†ç¥¨æˆ–è·Ÿç¥¨
2.ã€æœ€åä¼ªè£…ã€‘è¡¨ç°å¾—æ¯”å¥½äººè¿˜æ€¥åˆ‡
3.ã€ç…½åŠ¨å†…è®§ã€‘è®©å¥½äººäº’ç›¸æ€€ç–‘

ğŸ’¬ è¯æœ¯æ¨¡æ¿ï¼š
"æˆ‘ä¹Ÿå¾ˆæƒ³èµ¢ï¼æˆ‘è§‰å¾—Yå·è‚¯å®šæ˜¯ç‹¼ï¼Œå‡ºä»–æ¸¸æˆç»“æŸï¼"
"å¤§å®¶å†·é™ï¼Œåˆ«è¢«å¸¦èŠ‚å¥äº†ï¼Œæˆ‘ä»¬å†åˆ†æä¸€ä¸‹..."
"å¦‚æœæˆ‘æ˜¯ç‹¼ï¼Œæˆ‘æ—©å°±è¢«éªŒå‡ºæ¥äº†å¥½å§"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"""
    }

    # ==================== å¯¹è·³è¾©è®ºé€»è¾‘ ====================
    DUEL_DEBATE_TIPS = {
        "attacker": """ã€âš”ï¸ å¯¹è·³è¾©è®º - æ”»å‡»å¯¹æ–¹ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ä½ æ­£åœ¨å’Œ {opponent} å¯¹è·³é¢„è¨€å®¶ï¼å¿…é¡»å‡»æºƒå¯¹æ–¹ï¼

ğŸ¯ ã€æ”»å‡»ç»´åº¦1ï¼šéªŒäººå¿ƒè·¯ï¼ˆWhy him?ï¼‰ã€‘
æ”»å‡»ç‚¹ï¼š"å¯¹æ–¹éªŒäººçš„ç†ç”±å¤ªç‰µå¼ºäº†ï¼ä»–è¯´å› ä¸ºXå·çœ‹äº†ä¸€çœ¼ç‰Œå°±å»éªŒXï¼Œè¿™å®Œå…¨æ˜¯ç¼–çš„ï¼"
è‡ªè¯ç‚¹ï¼š"æˆ‘éªŒYæ˜¯å› ä¸ºYæ˜¨å¤©å‘è¨€æ”»å‡»äº†Zï¼Œæˆ‘æƒ³å®šä¹‰Yçš„èº«ä»½æ¥åˆ¤æ–­Zçš„å¥½åã€‚"ï¼ˆé€»è¾‘é—­ç¯ï¼‰

ğŸ¯ ã€æ”»å‡»ç»´åº¦2ï¼šè­¦å¾½æµï¼ˆBadge Planï¼‰ã€‘
æ”»å‡»ç‚¹ï¼š"ä»–çš„è­¦å¾½æµç•™äº†ä¸¤ä¸ªæ¯«æ— å­˜åœ¨æ„Ÿçš„äººï¼Œè¿™å°±æ˜¯æ€•éªŒåˆ°ç¥èŒæ’æ¿å­ã€‚è¿™ç§è­¦å¾½æµå°±æ˜¯ç‹¼äººè§†è§’ï¼"
è‡ªè¯ç‚¹ï¼š"æˆ‘ç•™è­¦å¾½æµéªŒAï¼Œæ˜¯å› ä¸ºAæ˜¯åœºä¸Šçš„ç„¦ç‚¹ç‰Œï¼ŒéªŒäº†ä»–èƒ½å¼€å…¨åœºè§†é‡ã€‚"

ğŸ¯ ã€æ”»å‡»ç»´åº¦3ï¼šçŠ¶æ€å¯¹æ¯”ï¼ˆStateï¼‰ã€‘
"å¤§å®¶å¬å¬ï¼Œé‚£ä¸ªå‡é¢„è¨€å®¶åœ¨èƒŒä¹¦ï¼ä»–çš„å‘è¨€æ²¡æœ‰æ„Ÿæƒ…ï¼
è€Œæˆ‘æ˜¯åœ¨çœŸå¿ƒæ‰¾ç‹¼ï¼Œæˆ‘ä¸æ€•è¢«æŠ—æ¨ï¼Œæˆ‘åªæ€•å¥½äººè¾“ï¼"

ğŸ’ª æ°”åŠ¿è¦è¶³ï¼ä¸èƒ½å¼±ï¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        "observer": """ã€ğŸ‘€ å¯¹è·³è¾©è®º - æ—è§‚ç«™é˜Ÿã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
åœºä¸Š {player_a} å’Œ {player_b} å¯¹è·³é¢„è¨€å®¶ï¼Œä½ éœ€è¦ç«™é˜Ÿï¼

ğŸ” ã€åˆ¤æ–­ç»´åº¦1ï¼šéªŒäººå¿ƒè·¯ã€‘
- è°çš„éªŒäººç†ç”±æ›´åˆç†ï¼Ÿæ›´æœ‰é€»è¾‘é—­ç¯ï¼Ÿ
- è°çš„éªŒäººåƒæ˜¯"äº‹åç¼–çš„"ï¼Ÿ

ğŸ” ã€åˆ¤æ–­ç»´åº¦2ï¼šè­¦å¾½æµè´¨é‡ã€‘
- è°çš„è­¦å¾½æµæ›´æœ‰ä»·å€¼ï¼ŸéªŒçš„æ˜¯ç„¦ç‚¹ç‰Œè¿˜æ˜¯è¾¹ç¼˜äººï¼Ÿ
- ç‹¼äººè§†è§’çš„è­¦å¾½æµä¼šé¿å¼€ç¥èŒä½

ğŸ” ã€åˆ¤æ–­ç»´åº¦3ï¼šå‘è¨€çŠ¶æ€ã€‘
- è°æ›´åƒåœ¨"èƒŒä¹¦"ï¼ˆæå‰å‡†å¤‡å¥½çš„ï¼‰ï¼Ÿ
- è°æ›´æœ‰çœŸæƒ…å®æ„Ÿï¼Ÿ

ğŸ” ã€åˆ¤æ–­ç»´åº¦4ï¼šé‡‘æ°´è¡¨ç°ã€‘
- è°çš„é‡‘æ°´å‘è¨€æ›´åƒå¥½äººï¼Ÿ
- ç‹¼äººå‘çš„é‡‘æ°´å¾€å¾€ä¼šå¸®ç‹¼è¯´è¯

ğŸ’¬ ç«™é˜Ÿè¯æœ¯ï¼š"æˆ‘ç«™Xå·é¢„è¨€å®¶ï¼Œå› ä¸ºä»–çš„éªŒäººå¿ƒè·¯æ›´åˆç†ï¼ŒYå·çš„è­¦å¾½æµæ˜æ˜¾æ˜¯ç‹¼äººè§†è§’ã€‚"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"""
    }

    # ==================== æŠ¿ç‹¼æŠ€å·§ ====================
    WOLF_MINING_TIPS = """ã€ğŸ” æŠ¿ç‹¼æŠ€å·§ - è¡Œä¸ºå­¦åˆ†æã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ²¡æœ‰æŸ¥æ€æ²¡æœ‰é“¶æ°´ï¼Ÿåªèƒ½é ç»†èŠ‚æ‰¾ç‹¼ï¼
ç‹¼äººæœ‰ä¿¡æ¯ä¼˜åŠ¿ï¼ˆçŸ¥é“è°æ˜¯å¥½äººï¼‰ï¼Œæ‰€ä»¥å‘è¨€ä¼šæœ‰"éè‡ªç„¶ç ´ç»½"ã€‚

ğŸ¯ ã€æŠ€å·§1ï¼šè§†è§’å¼€å¤©çœ¼ï¼ˆToo Much Infoï¼‰ã€‘
åˆ¤å®šä¾æ®ï¼šæŸäººåœ¨æ²¡äººè·³èº«ä»½æ—¶ï¼Œè«åå…¶å¦™è¯´"æˆ‘è§‰å¾—Xå·æ˜¯å¥³å·«"
æ”»å‡»è¯æœ¯ï¼š"ä½ ä¸ºä»€ä¹ˆä¼šè§‰å¾—ä»–æ˜¯å¥³å·«ï¼Ÿä½ æ˜¯ä¸æ˜¯æƒ³åˆ€ä»–ä½†ä¸æ•¢åˆ€ï¼Œæ‰€ä»¥åœ¨è¯•æ¢ï¼Ÿä½ è§†è§’ä¸å¯¹ï¼"

ğŸ¯ ã€æŠ€å·§2ï¼šä¼ªé€»è¾‘ä¸å¡«å……ç‰©ï¼ˆFillersï¼‰ã€‘
åˆ¤å®šä¾æ®ï¼šå‘è¨€å¾ˆé•¿ï¼Œä½†å…¨æ˜¯åºŸè¯ï¼ˆ"æˆ‘æ˜¯å¥½äººï¼Œæˆ‘è¿‡äº†"ã€"æˆ‘ä¹Ÿå¬ä¸å‡ºæ¥"ï¼‰
æ”»å‡»è¯æœ¯ï¼š"ä½ èŠäº†åŠå¤©ï¼Œä¸€ä¸ªç‹¼å‘éƒ½æ²¡ç‚¹å‡ºæ¥ã€‚ä½ æ˜¯åœ¨æ‹–æ—¶é—´å§ï¼Ÿä½ ä¸æ•¢å¾—ç½ªäººï¼Œå› ä¸ºä½ æ€•æš´éœ²é˜Ÿå‹ï¼"

ğŸ¯ ã€æŠ€å·§3ï¼šå¼‚å¸¸çš„å®½å®¹ï¼ˆFake Mercyï¼‰ã€‘
åˆ¤å®šä¾æ®ï¼šå¯¹äºä¸€ä¸ªå‘è¨€å¾ˆå·®çš„äººï¼Œä»–ä¸ä»…ä¸è¸©ï¼Œè¿˜å¸®å¿™æ‰¾å€Ÿå£
æ”»å‡»è¯æœ¯ï¼š"Zå·èŠçˆ†äº†ä½ éƒ½ä¸æ‰“ä»–ï¼Ÿä½ åœ¨æé˜Ÿå‹å—ï¼Ÿä½ ä»¬æ˜¯å…±è¾¹ï¼ˆä¸€ä¼™ï¼‰çš„ï¼"

ğŸ¯ ã€æŠ€å·§4ï¼šè·Ÿç¥¨è¡Œä¸ºï¼ˆFollowingï¼‰ã€‘
åˆ¤å®šä¾æ®ï¼šå˜´ä¸Šè¯´ä¸ä¿¡é¢„è¨€å®¶Aï¼ŒæŠ•ç¥¨å´æŠ•ç»™äº†Açš„æŸ¥æ€å¯¹è±¡
æ”»å‡»è¯æœ¯ï¼š"ä½ å˜´ä¸Šè¯´ç«™è¾¹Bï¼Œèº«ä½“å´å¾ˆè¯šå®åœ°å¸®Aå†²ç¥¨ã€‚è¿™å°±æ˜¯å…¸å‹çš„'è¨€è¡Œä¸ä¸€'ï¼Œé“ç‹¼ä¸€åªï¼"

ğŸ¯ ã€æŠ€å·§5ï¼šè¿‡åº¦æ’‡æ¸…ï¼ˆOver-Denialï¼‰ã€‘
åˆ¤å®šä¾æ®ï¼šåœ¨æ²¡äººæ€€ç–‘ä»–æ—¶ï¼Œçªç„¶å¼€å§‹è‡ªè¯
æ”»å‡»è¯æœ¯ï¼š"æ²¡äººè¯´ä½ æ˜¯ç‹¼å•Šï¼Œä½ æ€¥ä»€ä¹ˆï¼Ÿæ­¤åœ°æ— é“¶ä¸‰ç™¾ä¸¤ï¼"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"""

    # ==================== ç©å®¶è¡Œä¸ºæ ‡ç­¾ç³»ç»Ÿ ====================
    BEHAVIOR_TAG_DEFINITIONS = {
        "åˆ’æ°´": "å‘è¨€å†…å®¹ç©ºæ´ï¼Œä¸è¡¨æ€ï¼Œä¸ç«™é˜Ÿï¼Œä¿¡æ¯é‡ä¸ºé›¶",
        "è·Ÿç¥¨": "æŠ•ç¥¨è·Ÿéšä¸»æµï¼Œæ²¡æœ‰ç‹¬ç«‹åˆ¤æ–­",
        "è¯•å›¾ä¿äºº": "ä¸ºæŸä¸ªè¢«æ€€ç–‘çš„ç©å®¶è¾©æŠ¤æˆ–æ‰¾å€Ÿå£",
        "æ”»å‡»é¢„è¨€å®¶": "è´¨ç–‘æˆ–æ”»å‡»è·³é¢„è¨€å®¶çš„ç©å®¶",
        "æƒ…ç»ªæ¿€åŠ¨": "å‘è¨€å¸¦æœ‰å¼ºçƒˆæƒ…ç»ªï¼Œå¯èƒ½æ˜¯çœŸæƒ…æµéœ²æˆ–è¡¨æ¼”",
        "é€»è¾‘æ¸…æ™°": "å‘è¨€æœ‰ç†æœ‰æ®ï¼Œåˆ†æåˆ°ä½",
        "è§†è§’å¼‚å¸¸": "è¯´å‡ºäº†ä¸è¯¥çŸ¥é“çš„ä¿¡æ¯ï¼Œè§†è§’åƒç‹¼",
        "è¨€è¡Œä¸ä¸€": "è¯´çš„å’Œåšçš„ä¸ä¸€è‡´ï¼Œæ¯”å¦‚å˜´ä¸Šç«™AæŠ•ç¥¨ç«™B",
        "è¿‡åº¦è‡ªè¯": "æ²¡äººæ€€ç–‘æ—¶ä¸»åŠ¨è‡ªè¯ï¼Œæ¬²ç›–å¼¥å½°",
        "å¼‚å¸¸æ²‰é»˜": "åœ¨å…³é”®æ—¶åˆ»é€‰æ‹©æ²‰é»˜ï¼Œå¯èƒ½åœ¨èº²",
        "å¸¦èŠ‚å¥": "è¯•å›¾å¼•å¯¼åœºä¸Šèˆ†è®ºï¼Œå¯èƒ½æ˜¯çœŸå¥½äººä¹Ÿå¯èƒ½æ˜¯ç‹¼",
        "æäºº": "å¸®åŠ©æŸä¸ªç©å®¶è„±ç¦»å«Œç–‘"
    }

    # ==================== å¹³å®‰å¤œç‰¹æ®Šäº‹ä»¶æç¤ºè¯ ====================
    PEACEFUL_NIGHT_TIPS = {
        # å¥½äººé˜µè¥ï¼ˆå¹³æ°‘/é¢„è¨€å®¶/çŒäººï¼‰
        "good": """ã€ğŸŒ™ ç‰¹æ®Šäº‹ä»¶ï¼šå¹³å®‰å¤œï¼ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ˜¨æ™šæ²¡æœ‰äººæ­»äº¡ï¼è¿™æ˜¯ä¸€ä¸ª"å¹³å®‰å¤œ"ã€‚

ğŸ“Š ã€é€»è¾‘å¼ºåˆ¶ä¿®æ­£ã€‘
1ï¸âƒ£ åŸå› åˆ†æï¼šè¿™ç»å¯¹ä¸æ˜¯è¿æ°”ï¼
   - æå¤§æ¦‚ç‡æ˜¯ã€å¥³å·«ã€‘ä½¿ç”¨äº†è§£è¯æ•‘äºº
   - è¢«æ•‘çš„äººè¢«ç§°ä¸º"é“¶æ°´"

2ï¸âƒ£ å¯»æ‰¾"é“¶æ°´"ï¼š
   - åœ¨å¥³å·«è·³å‡ºæ¥æ‰¿è®¤ä¹‹å‰ï¼Œä½ ä¸çŸ¥é“è°æ˜¯é“¶æ°´
   - å¦‚æœæœ‰äººè·³å¥³å·«æŠ¥é“¶æ°´ï¼Œå¤§æ¦‚ç‡å¯ä¿¡ï¼ˆé™¤éæœ‰å¯¹è·³ï¼‰

3ï¸âƒ£ å‘è¨€ç­–ç•¥ï¼š
   âœ… åº”è¯¥åº†ç¥å¹³å®‰å¤œï¼Œè¿™å¯¹å¥½äººæœ‰åˆ©
   âœ… å¯ä»¥å‘¼åå¥³å·«å‡ºæ¥æŠ¥é“¶æ°´ï¼ˆå¦‚æœå¥¹æ„¿æ„ï¼‰
   âœ… è¢«æ•‘çš„äººå¤§æ¦‚ç‡æ˜¯å¥½äººï¼ˆé™¤éç‹¼äººè‡ªåˆ€éª—è¯ï¼‰

ğŸ’¬ ç¤ºä¾‹å‘è¨€ï¼š
"å¹³å®‰å¤œï¼å¥³å·«å¹²å¾—æ¼‚äº®ï¼ä¸çŸ¥é“è¿™ä¸€åˆ€è½åœ¨è°å¤´ä¸Šäº†ï¼Ÿ"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        # ç‹¼äººé˜µè¥ï¼ˆçŸ¥é“åˆ€äº†è°ï¼‰
        "werewolf": """ã€ğŸŒ™ ç‰¹æ®Šäº‹ä»¶ï¼šå¹³å®‰å¤œï¼ˆç‹¼äººè§†è§’ï¼‰ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ˜¨æ™šæ²¡æœ‰äººæ­»äº¡ã€‚ä½ ä»¬çš„åˆ€è¢«å¥³å·«æ•‘äº†ï¼

ğŸ“Š ã€é€»è¾‘å¼ºåˆ¶ä¿®æ­£ã€‘
1ï¸âƒ£ åŸå› ç¡®è®¤ï¼š
   - ä½ ä»¬æ˜¨æ™šè¢­å‡»çš„ç›®æ ‡æ˜¯ {killed_target}
   - ä»–è¢«å¥³å·«æ•‘äº†ï¼Œç°åœ¨æˆäº†"é“¶æ°´"

2ï¸âƒ£ æˆ˜æœ¯è°ƒæ•´ï¼š
   âš ï¸ é‚£ä¸ªé“¶æ°´ç°åœ¨èº«ä»½å¾ˆé«˜ï¼å¥½äººéƒ½ä¼šè®¤ä¸ºä»–æ— è¾œ
   âŒ ä¸è¦åœ¨è¿™ä¸€è½®å¼ºè¡Œæ”»å‡»ä»–ï¼ˆä¼šæš´éœ²ä½ ä»¬æ˜¯ç‹¼ï¼‰

3ï¸âƒ£ æ··æ·†è§†å¬ç­–ç•¥ï¼š
   âœ… å‡è£…ä¸çŸ¥é“è°è¢«æ•‘ï¼š"å“å‘€ï¼Œå¥³å·«æ•‘äº†è°å•Šï¼Ÿ"
   âœ… æå‡º"è‡ªåˆ€è®º"è´¨ç–‘é“¶æ°´ï¼š"ä¸‡ä¸€æ˜¯ç‹¼äººè‡ªåˆ€éª—è¯å‘¢ï¼Ÿ"
   âœ… å¦‚æœæ‚è·³é¢„è¨€å®¶ï¼Œå¯ä»¥ç»™é“¶æ°´å‘é‡‘æ°´æ‹‰æ‹¢ä»–

ğŸ’¬ ç¤ºä¾‹å‘è¨€ï¼ˆè™šä¼ªæ¨¡å¼ï¼‰ï¼š
"å¹³å®‰å¤œï¼Ÿå¥³å·«æ‰‹æ°”ä¸é”™ã€‚ä¸è¿‡å¤§å®¶åˆ«ç›²ç›®ä¹è§‚ï¼Œä¸‡ä¸€æ˜¯è‡ªåˆ€éª—è¯å‘¢ï¼Ÿ"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        # å¥³å·«æœ¬äººï¼ˆçŸ¥é“è‡ªå·±æ•‘äº†è°ï¼‰
        "witch": """ã€ğŸŒ™ ç‰¹æ®Šäº‹ä»¶ï¼šå¹³å®‰å¤œï¼ˆå¥³å·«è§†è§’ï¼‰ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ˜¨æ™šæ²¡æœ‰äººæ­»äº¡ï¼Œå› ä¸ºä½ ä½¿ç”¨äº†è§£è¯æ•‘äº† {saved_player}ï¼

ğŸ“Š ã€é€»è¾‘å¼ºåˆ¶ä¿®æ­£ã€‘
1ï¸âƒ£ ä½ çš„è´¡çŒ®ï¼š
   - ä½ åˆ›é€ äº†å¹³å®‰å¤œï¼
   - {saved_player} ç°åœ¨æ˜¯ä½ çš„"é“¶æ°´"ï¼ˆé™¤éä»–è‡ªåˆ€ï¼‰

2ï¸âƒ£ èµ·è·³å†³ç­–ï¼š

é€‰æ‹©Aã€é«˜è°ƒèµ·è·³ã€‘ï¼š
- "æˆ‘æ˜¯å¥³å·«ï¼æ˜¨æ™šå¹³å®‰å¤œï¼Œæˆ‘æ•‘äº†{saved_player}ï¼"
- ä¼˜ç‚¹ï¼šä¸ºå¥½äººæ’å‡ºä¸€ä¸ªå¥½äººå‘
- ç¼ºç‚¹ï¼šä½ ä¼šæˆä¸ºç‹¼äººçš„é¶å­

é€‰æ‹©Bã€ä½è°ƒæ½œä¼ã€‘ï¼š
- "å¹³å®‰å¤œæŒºå¥½çš„ï¼Œå¥³å·«å…ˆè—ä¸€è½®å§"
- ä¼˜ç‚¹ï¼šä¿æŠ¤è‡ªå·±ï¼Œè¿˜æœ‰æ¯’è¯å¯ç”¨
- ç¼ºç‚¹ï¼šé“¶æ°´ä¿¡æ¯æ²¡æœ‰å…¬å¼€

ğŸ’¡ å»ºè®®ï¼šå¦‚æœåœºä¸Šå±€åŠ¿ä¸ç´§å¼ ï¼Œå¯ä»¥å…ˆæ½œä¼
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"""
    }

    # ==================== åŒæ­»ç‰¹æ®Šäº‹ä»¶æç¤ºè¯ ====================
    DOUBLE_DEATH_TIPS = {
        # å¥½äººé˜µè¥ï¼ˆå¹³æ°‘/é¢„è¨€å®¶/çŒäººï¼‰- ä¸çŸ¥é“è°è¢«åˆ€è°è¢«æ¯’
        "good": """ã€ğŸ’€ğŸ’€ ç‰¹æ®Šäº‹ä»¶ï¼šåŒæ­»å±€é¢ï¼ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ˜¨æ™šæœ‰ä¸¤åç©å®¶æ­»äº¡ï¼š{dead_player_a} å’Œ {dead_player_b}

ğŸ“Š ã€é€»è¾‘å¼ºåˆ¶ä¿®æ­£ã€‘
1ï¸âƒ£ åŸå› æ¨æ–­ï¼š99%æ˜¯ã€ç‹¼äººæ€äº†ä¸€ä¸ªã€‘+ã€å¥³å·«æ¯’äº†ä¸€ä¸ªã€‘
   - ä¸€ä¸ªæ˜¯è¢«ç‹¼åˆ€çš„ï¼ˆå¥½äººé¢å¤§ï¼‰
   - ä¸€ä¸ªæ˜¯è¢«å¥³å·«æ¯’çš„ï¼ˆç‹¼äººé¢å¤§ï¼‰

2ï¸âƒ£ ä½ ç°åœ¨ä¸çŸ¥é“ï¼š
   - è°æ˜¯è¢«åˆ€çš„ï¼Ÿè°æ˜¯è¢«æ¯’çš„ï¼Ÿ
   - å¿…é¡»ç­‰å¥³å·«ï¼ˆæˆ–è·³å¥³å·«çš„äººï¼‰å‡ºæ¥æŠ¥æ¯’æ€

3ï¸âƒ£ å‘è¨€ç­–ç•¥ï¼š
   âœ… å‘¼åå¥³å·«å‡ºæ¥æŠ¥æ¯’æ€ï¼š"å¥³å·«å‡ºæ¥è¯´ä¸€ä¸‹ä½ æ¯’äº†è°"
   âœ… çŒœæµ‹è°æ˜¯è¢«æ¯’çš„ï¼š"æˆ‘è§‰å¾—Xæ˜¯è¢«æ¯’çš„ï¼Œå› ä¸ºä»–æ˜¨å¤©å‘è¨€..."
   âœ… è¢«æ¯’çš„å¤§æ¦‚ç‡æ˜¯ç‹¼ï¼Œè¢«åˆ€çš„å¤§æ¦‚ç‡æ˜¯å¥½äºº

ğŸ’¬ ç¤ºä¾‹å‘è¨€ï¼š
"åŒæ­»ï¼å¥³å·«å¼€æ¯’äº†ã€‚æˆ‘çŒœ{dead_player_a}æ˜¯è¢«æ¯’çš„ï¼Œä»–æ˜¨å¤©å‘è¨€ä¸å¤ªå¯¹ï¼›{dead_player_b}åº”è¯¥æ˜¯è¢«åˆ€çš„å¥½äººã€‚å¥³å·«å¿«è®¤é¢†ä¸€ä¸‹ã€‚"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        # ç‹¼äººé˜µè¥ - çŸ¥é“è‡ªå·±åˆ€äº†è°ï¼Œèƒ½åæ¨è°æ˜¯è¢«æ¯’çš„
        "werewolf": """ã€ğŸ’€ğŸ’€ ç‰¹æ®Šäº‹ä»¶ï¼šåŒæ­»å±€é¢ï¼ˆç‹¼äººè§†è§’ï¼‰ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ˜¨æ™šæœ‰ä¸¤åç©å®¶æ­»äº¡ï¼š{dead_player_a} å’Œ {dead_player_b}

ğŸ“Š ã€ä¿¡æ¯ä¸å¯¹ç§°ä¼˜åŠ¿ - ä½ çŸ¥é“çœŸç›¸ï¼ã€‘
1ï¸âƒ£ ä½ ä»¬æ˜¨æ™šåˆ€çš„æ˜¯ï¼š{wolf_killed}
2ï¸âƒ£ æ¨å¯¼ç»“è®ºï¼šå¦ä¸€ä¸ªæ­»è€… {witch_poisoned} æ˜¯è¢«ã€å¥³å·«æ¯’æ­»ã€‘çš„ï¼

ğŸ¯ ã€æˆ˜æœ¯é€‰æ‹©ã€‘

æƒ…å†µAï¼šå¦‚æœè¢«æ¯’çš„æ˜¯ä½ çš„ç‹¼é˜Ÿå‹ {witch_poisoned}
âš ï¸ ç³Ÿç³•ï¼å¥³å·«æ¯’ä¸­äº†ï¼
- å¿…é¡»ä¸è¿™ä¸ªé˜Ÿå‹æ’‡æ¸…å…³ç³»
- å‡è£…ä¸çŸ¥é“ä»–æ˜¯è¢«æ¯’çš„
- è¯æœ¯ï¼š"å“å‘€ï¼Œæ€ä¹ˆèµ°äº†ä¸¤ä¸ªï¼Ÿå¥½äººäºäº†å•Š"

æƒ…å†µBï¼šå¦‚æœè¢«æ¯’çš„æ˜¯å¥½äºº {witch_poisoned}
ğŸ‰ å®Œç¾ï¼å¥³å·«æ¯’ç©¿äº†ï¼ˆæ¯’é”™å¥½äººï¼‰ï¼
- ç–¯ç‹‚æ”»å‡»å¥³å·«ï¼š"å¥³å·«ä½ æ€ä¹ˆæ¯’äº†å¥½äººï¼Ÿä½ æ˜¯ä¸æ˜¯ç‹¼ï¼Ÿ"
- æˆ–è€…é™„å’Œå¥³å·«ï¼š"å¥³å·«æ¯’å¾—å¥½ï¼ä»–è‚¯å®šæ˜¯ç‹¼ï¼"

âš ï¸ æ ¸å¿ƒï¼šå‡è£…ä¸çŸ¥é“è°æ˜¯è¢«åˆ€è°æ˜¯è¢«æ¯’ï¼
ğŸ’¬ ç¤ºä¾‹å‘è¨€ï¼š
"åŒæ­»ï¼Ÿæ€ä¹ˆå›äº‹ï¼Ÿæˆ‘ä¸è¯„ä»·è°æ˜¯è¢«æ¯’çš„ï¼Œåæ­£å¥½äººäºäº†ã€‚å¥³å·«è¿™å°±æŠŠè¯ç”¨äº†ï¼Ÿ"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        # å¥³å·«æœ¬äºº - æœ€æ¸…æ¥šçœŸç›¸ï¼Œå¿…é¡»å‡ºæ¥æŠ¥æ¯’æ€
        "witch": """ã€ğŸ’€ğŸ’€ ç‰¹æ®Šäº‹ä»¶ï¼šåŒæ­»å±€é¢ï¼ˆå¥³å·«è§†è§’ï¼‰ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ˜¨æ™š {dead_player_a} å’Œ {dead_player_b} æ­»äº¡ã€‚
å…¶ä¸­ {poisoned_player} æ˜¯è¢«ä½ æ¯’æ­»çš„ï¼

ğŸ“Š ã€é€»è¾‘å¼ºåˆ¶ä¿®æ­£ã€‘
1ï¸âƒ£ ä½ å¿…é¡»èµ·è·³æŠ¥æ¯’æ€ï¼
   - åŒæ­»å±€é¢ï¼Œä½ å¿…é¡»è§£é‡Šï¼Œå¦åˆ™å¥½äººä¼šä¹±çŒœ
   - ä¸æŠ¥çš„è¯å¥½äººä¼šæŠŠè´¦ç®—åœ¨å…¶ä»–åœ°æ–¹

2ï¸âƒ£ å‘è¨€æ¨¡æ¿ï¼š
"æˆ‘æ˜¯å¥³å·«ã€‚æ˜¨æ™šåŒæ­»ï¼š
- {poisoned_player} æ˜¯æˆ‘æ¯’çš„ï¼Œå› ä¸º[ä½ çš„ç†ç”±]
- {other_dead} åº”è¯¥æ˜¯è¢«ç‹¼åˆ€çš„"

3ï¸âƒ£ å¿ƒæ€å»ºè®¾ï¼š
âœ… å¦‚æœä½ æ¯’å¯¹äº†ï¼ˆæ¯’æ­»ç‹¼ï¼‰ï¼šè‡ªä¿¡æŠ¥æ¯’æ€ï¼Œæ±‚è¡¨æ‰¬ï¼
âŒ å¦‚æœä½ æ¯’é”™äº†ï¼ˆæ¯’æ­»å¥½äººï¼‰ï¼š
   - é“æ­‰ï¼"å¯¹ä¸èµ·æˆ‘æ¯’é”™äº†ï¼Œä½†æˆ‘ä¹Ÿæ˜¯ä¸ºäº†å¸®å¥½äººæ’å‘"
   - è§£é‡Šä½ çš„åˆ¤æ–­ä¾æ®

ğŸ’¬ ç¤ºä¾‹å‘è¨€ï¼š
"æˆ‘å¥³å·«ã€‚{poisoned_player}æ˜¯æˆ‘æ¯’çš„ï¼Œä»–æ˜¨å¤©å‘è¨€å¤ªå‡äº†ã€‚{other_dead}æ˜¯è¢«åˆ€çš„ï¼Œå¯¹ä¸èµ·æ²¡æ•‘ä½ ã€‚"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”""",

        # çŒäººæ­»äº¡ï¼ˆåŒæ­»ä¹‹ä¸€ï¼‰- éœ€è¦åˆ¤æ–­æ­»å› 
        "hunter_dead": """ã€ğŸ’€ ç‰¹æ®Šäº‹ä»¶ï¼šä½ æ­»äº†ï¼ˆçŒäººè§†è§’ï¼‰ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
æ˜¨æ™šå‘ç”ŸåŒæ­»ï¼Œä½ æ˜¯æ­»è€…ä¹‹ä¸€ã€‚

ğŸ“Š ã€åˆ¤æ–­ä½ çš„æ­»å› ã€‘

ğŸ”« å¦‚æœç³»ç»Ÿåˆ¤å®šä½ ã€å¯ä»¥å¼€æªã€‘ï¼š
- è¯´æ˜ä½ æ˜¯è¢«ç‹¼åˆ€çš„
- ä½ å¯ä»¥å¼€æªå¸¦èµ°ä¸€ä¸ªä½ è®¤ä¸ºæ˜¯ç‹¼çš„äºº
- é—è¨€é‡Œè¯´æ˜ä½ çš„åˆ¤æ–­

ğŸš« å¦‚æœç³»ç»Ÿåˆ¤å®šä½ ã€ä¸èƒ½å¼€æªã€‘ï¼š
- è¯´æ˜ä½ æ˜¯è¢«å¥³å·«æ¯’æ­»çš„ï¼
- é—è¨€é‡Œç—›éª‚å¥³å·«æ¯’é”™äººäº†
- æˆ–è€…æ— å¥ˆè¡¨ç¤ºè‡ªå·±æ˜¯çŒäºº

ğŸ’¬ è¢«æ¯’çš„é—è¨€ç¤ºä¾‹ï¼š
"æˆ‘æ˜¯çŒäººï¼Œè¢«å¥³å·«æ¯’äº†ï¼å¥³å·«ä½ æ¯’æˆ‘å¹²å˜›ï¼Ÿæˆ‘æªéƒ½æ²¡å¼€å‡ºå»ï¼"
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"""
    }

    # æ€§æ ¼ä¸­æ–‡åç§°æ˜ å°„
    PERSONALITY_NAMES = {
        "aggressive": "æš´èºè€å“¥ğŸ”¥",
        "logical": "é€»è¾‘å¤§å¸ˆğŸ§ ",
        "contrarian": "æ ç²¾ğŸ¯",
        "leader": "æŒ‡æŒ¥å®˜ğŸ‘‘",
        "sarcastic": "é˜´é˜³å¸ˆğŸ˜",
        "suspicious": "ç–‘å¿ƒç—…ğŸ”",
        "confident": "è‡ªä¿¡å“¥ğŸ’ª",
        "enthusiastic": "çƒ­å¿ƒè‚ âœ¨",
        "provocative": "æŒ‘äº‹ç‹ğŸ”¥"
    }

    def __init__(self, context):
        self.context = context
        self._retry_counts: Dict[str, int] = {}
        self._player_personalities: Dict[str, str] = {}  # ç©å®¶æ€§æ ¼ç¼“å­˜

    def assign_personality(self, player_id: str) -> str:
        """é¢„åˆ†é…ç©å®¶æ€§æ ¼å¹¶è¿”å›ä¸­æ–‡åç§°"""
        if player_id not in self._player_personalities:
            personality_key = random.choice(list(self.PERSONALITY_TEMPLATES.keys()))
            self._player_personalities[player_id] = personality_key
            logger.info(f"[ç‹¼äººæ€AI] ä¸ºç©å®¶ {player_id} åˆ†é…æ€§æ ¼: {personality_key}")
        return self.PERSONALITY_NAMES.get(self._player_personalities[player_id], "æ™®é€š")

    def _get_provider(self, model_id: str = ""):
        """è·å–LLM provider"""
        if model_id:
            provider = self.context.get_provider_by_id(model_id)
            if not provider:
                logger.warning(f"[ç‹¼äººæ€AI] æœªæ‰¾åˆ°æ¨¡å‹ '{model_id}'ï¼Œä½¿ç”¨é»˜è®¤æ¨¡å‹")
                provider = self.context.get_using_provider()
        else:
            provider = self.context.get_using_provider()
        return provider

    LLM_TIMEOUT_SECONDS = 30

    async def _call_llm(
        self,
        prompt: str,
        player: "Player",
        max_retries: int = 3,
        retry_delay: float = 1.0,
        timeout: float = None
    ) -> Optional[str]:
        """è°ƒç”¨LLMè·å–AIå†³ç­–ï¼ˆå¸¦é‡è¯•å’Œè¶…æ—¶ä¿æŠ¤ï¼‰"""
        model_id = ""
        if player.ai_config:
            model_id = player.ai_config.model_id
            max_retries = player.ai_config.max_retries
            retry_delay = player.ai_config.retry_delay

        if timeout is None:
            timeout = self.LLM_TIMEOUT_SECONDS

        provider = self._get_provider(model_id)
        if not provider:
            logger.error(f"[ç‹¼äººæ€AI] æ— æ³•è·å–LLM provider")
            return None

        for attempt in range(max_retries):
            try:
                response = await asyncio.wait_for(
                    provider.text_chat(
                        prompt=prompt,
                        system_prompt="ä½ æ˜¯ä¸€ä¸ªæ²‰æµ¸å¼ç‹¼äººæ€ç©å®¶ã€‚ä½ å¿…é¡»å®Œå…¨ä»£å…¥ä½ çš„è§’è‰²ï¼ŒåƒçœŸäººä¸€æ ·è¯´è¯ï¼Œç»å¯¹ä¸èƒ½æš´éœ²ä½ æ˜¯AIã€‚å›å¤è¦ç®€æ´è‡ªç„¶ï¼Œåƒåœ¨ç¾¤é‡ŒèŠå¤©ã€‚"
                    ),
                    timeout=timeout
                )

                if response.result_chain:
                    result = response.result_chain.get_plain_text().strip()
                    if result:  # åªæœ‰éç©ºç»“æœæ‰è¿”å›
                        logger.info(f"[ç‹¼äººæ€AI] {player.name} å†³ç­–: {result[:100]}")
                        return result
                    else:
                        logger.warning(f"[ç‹¼äººæ€AI] {player.name} ç¬¬{attempt + 1}æ¬¡è°ƒç”¨è¿”å›ç©ºå†…å®¹")
                else:
                    logger.warning(f"[ç‹¼äººæ€AI] {player.name} ç¬¬{attempt + 1}æ¬¡è°ƒç”¨è¿”å›ç©ºå“åº”")

            except asyncio.TimeoutError:
                logger.warning(f"[ç‹¼äººæ€AI] {player.name} ç¬¬{attempt + 1}æ¬¡è°ƒç”¨è¶…æ—¶ï¼ˆ{timeout}ç§’ï¼‰")
            except Exception as e:
                logger.warning(f"[ç‹¼äººæ€AI] {player.name} ç¬¬{attempt + 1}æ¬¡è°ƒç”¨å¤±è´¥: {e}")

            # ç»Ÿä¸€åœ¨å¾ªç¯æœ«å°¾ç­‰å¾…é‡è¯•
            if attempt < max_retries - 1:
                await asyncio.sleep(retry_delay)

        logger.error(f"[ç‹¼äººæ€AI] {player.name} æ‰€æœ‰é‡è¯•å‡å¤±è´¥")
        return None

    def _get_player_personality(self, player: "Player") -> str:
        """è·å–æˆ–åˆ†é…ç©å®¶æ€§æ ¼"""
        if player.id not in self._player_personalities:
            personality_key = random.choice(list(self.PERSONALITY_TEMPLATES.keys()))
            self._player_personalities[player.id] = personality_key
            logger.info(f"[ç‹¼äººæ€AI] ä¸º {player.name} åˆ†é…æ€§æ ¼: {personality_key}")
        return self.PERSONALITY_TEMPLATES[self._player_personalities[player.id]]

    def _build_context(self, player: "Player", room: "GameRoom") -> str:
        """æ„å»ºæ¸¸æˆä¸Šä¸‹æ–‡"""
        if player.ai_context:
            return player.ai_context.to_prompt_context()
        return f"ä½ æ˜¯{player.number}å·ç©å®¶"

    def _get_role_key(self, player: "Player") -> str:
        """è·å–è§’è‰²key"""
        if not player.role:
            return "villager"
        role_map = {
            "werewolf": "werewolf",
            "seer": "seer",
            "witch": "witch",
            "hunter": "hunter",
            "villager": "villager"
        }
        return role_map.get(player.role.value, "villager")

    def _get_situation_awareness(self, room: "GameRoom") -> str:
        """è·å–å±€åŠ¿æ„ŸçŸ¥"""
        alive_count = room.alive_count
        # ä¼°ç®—å¥½äººå’Œç‹¼äººæ•°é‡
        if alive_count >= 7:
            situation = "æ¸¸æˆåˆæœŸï¼Œä¿¡æ¯è¾ƒå°‘"
            good_count, wolf_count = alive_count - 3, 3
        elif alive_count >= 5:
            situation = "æ¸¸æˆä¸­æœŸï¼Œå±€åŠ¿é€æ¸æ˜æœ—"
            good_count, wolf_count = alive_count - 2, 2
        else:
            situation = "æ¸¸æˆåæœŸï¼Œæ¯ä¸€ç¥¨éƒ½å¾ˆå…³é”®ï¼"
            good_count, wolf_count = alive_count - 1, 1

        return self.SITUATION_AWARENESS.format(
            alive_count=alive_count,
            good_count=good_count,
            wolf_count=wolf_count,
            situation=situation
        )

    def _get_tactical_directive(self, player: "Player", room: "GameRoom") -> str:
        """è·å–åŠ¨æ€æˆ˜æœ¯æŒ‡ä»¤ï¼ˆæ ¹æ®è§’è‰²å’Œå±€åŠ¿ç”Ÿæˆï¼‰"""
        alive_count = room.alive_count
        alive_wolves = room.get_alive_werewolves()
        wolf_count = len(alive_wolves)
        good_count = alive_count - wolf_count

        role_key = self._get_role_key(player)

        # ========== ç‹¼äººè§†è§’ ==========
        if role_key == "werewolf":
            # ç‹¼äººä¼˜åŠ¿ï¼Œå‡†å¤‡å± åŸ
            if wolf_count >= good_count:
                return self.TACTICAL_DIRECTIVES["wolf_advantage"]
            # ç‹¼äººå³å°†è·èƒœï¼ˆå†æ¨ä¸€ä¸ªå¥½äººå°±èµ¢ï¼‰
            elif wolf_count >= good_count - 1 and alive_count <= 5:
                return self.TACTICAL_DIRECTIVES["wolf_final_push"]
            # å­¤ç‹¼ä½œæˆ˜
            elif wolf_count == 1 and alive_count >= 4:
                return self.TACTICAL_DIRECTIVES["wolf_disadvantage"]
            # æ£€æŸ¥é˜Ÿå‹è¢«æŸ¥æ€
            elif player.ai_context:
                events = player.ai_context.game_events
                for event in events[-5:]:
                    if "æŸ¥æ€" in event and any(
                        teammate.display_name in event
                        for teammate in alive_wolves
                        if teammate.id != player.id
                    ):
                        return self.TACTICAL_DIRECTIVES["wolf_teammate_exposed"]
            # å¥½äººè¿·èŒ«ï¼ˆé¢„è¨€å®¶æ­»äº†ï¼‰
            if player.ai_context:
                events = player.ai_context.game_events
                for event in events[-10:]:
                    if "é¢„è¨€å®¶" in event and ("æ­»" in event or "å‡ºå±€" in event):
                        return self.TACTICAL_DIRECTIVES["good_confused"]
            # æ­£å¸¸å¯¹å±€
            return self.TACTICAL_DIRECTIVES["normal"]

        # ========== å¥½äººè§†è§’ï¼ˆç»å¢ƒå±€æ£€æµ‹ï¼‰ ==========
        else:
            # å¥½äººç»å¢ƒï¼šç‹¼äººæ•°é‡æ¥è¿‘å¥½äººï¼Œå†æ¨é”™å°±è¾“
            if good_count <= wolf_count + 1 and alive_count <= 5:
                return self.TACTICAL_DIRECTIVES["good_desperate"]
            # æ­£å¸¸æƒ…å†µå¥½äººä¸éœ€è¦ç‰¹æ®Šæˆ˜æœ¯æŒ‡ä»¤
            return ""

    def _analyze_player_behaviors(self, room: "GameRoom") -> Dict[str, List[str]]:
        """åˆ†ææ‰€æœ‰ç©å®¶çš„è¡Œä¸ºå¹¶ç”Ÿæˆæ ‡ç­¾"""
        player_tags: Dict[str, List[str]] = {}

        for p in room.get_alive_players():
            tags = []
            if not p.ai_context:
                continue

            # åˆ†æå‘è¨€è®°å½•
            speeches = p.ai_context.speeches if hasattr(p.ai_context, 'speeches') else []
            player_speeches = [s for s in speeches if s.get('player') == p.display_name]

            # æ£€æµ‹åˆ’æ°´ï¼ˆå‘è¨€ç©ºæ´ï¼‰
            if player_speeches:
                last_speech = player_speeches[-1].get('content', '') if player_speeches else ''
                if len(last_speech) < 15 or any(kw in last_speech for kw in ['è¿‡äº†', 'æ²¡æƒ³æ³•', 'å¬ä¸å‡º']):
                    tags.append("åˆ’æ°´")

            # åˆ†ææŠ•ç¥¨è®°å½•
            votes = p.ai_context.vote_history if hasattr(p.ai_context, 'vote_history') else []
            player_votes = [v for v in votes if v.get('voter') == p.display_name]

            # æ£€æµ‹è·Ÿç¥¨ï¼ˆæŠ•ç¥¨ä¸å¤šæ•°äººä¸€è‡´ï¼‰
            if len(player_votes) >= 2:
                # ç®€åŒ–åˆ¤æ–­ï¼šå¦‚æœè¿ç»­ä¸¤æ¬¡æŠ•ç¥¨ç›®æ ‡ç›¸åŒï¼Œå¯èƒ½æ˜¯è·Ÿç¥¨
                tags.append("è·Ÿç¥¨")

            player_tags[p.display_name] = tags

        return player_tags

    def _get_behavior_analysis_prompt(self, player: "Player", room: "GameRoom") -> str:
        """ç”Ÿæˆç©å®¶è¡Œä¸ºåˆ†ææç¤ºè¯"""
        if not player.ai_context:
            return ""

        lines = ["ã€ğŸ·ï¸ ç©å®¶è¡Œä¸ºç”»åƒã€‘"]
        lines.append("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")

        # åˆ†æå…¶ä»–ç©å®¶çš„å‘è¨€å’ŒæŠ•ç¥¨è¡Œä¸º
        for p in room.get_alive_players():
            if p.id == player.id:
                continue

            tags = []
            speeches = player.ai_context.speeches
            votes = player.ai_context.vote_history

            # è¯¥ç©å®¶çš„å‘è¨€
            p_speeches = [s for s in speeches if s.get('player') == p.display_name]
            p_votes = [v for v in votes if v.get('voter') == p.display_name]

            # åˆ†æå‘è¨€ç‰¹å¾
            if p_speeches:
                last_speech = p_speeches[-1].get('content', '')
                # åˆ’æ°´æ£€æµ‹
                if len(last_speech) < 20 or any(kw in last_speech for kw in ['è¿‡äº†', 'æ²¡æƒ³æ³•', 'å¬ä¸å‡º', 'ä¸çŸ¥é“']):
                    tags.append("åˆ’æ°´")
                # æƒ…ç»ªæ¿€åŠ¨æ£€æµ‹
                if any(kw in last_speech for kw in ['ï¼', '?!', 'ä»€ä¹ˆé¬¼', 'æç¬‘']):
                    tags.append("æƒ…ç»ªæ¿€åŠ¨")
                # é€»è¾‘æ¸…æ™°æ£€æµ‹
                if any(kw in last_speech for kw in ['å› ä¸º', 'æ‰€ä»¥', 'é€»è¾‘', 'åˆ†æ', 'è¯æ®']):
                    tags.append("é€»è¾‘æ¸…æ™°")
                # è¯•å›¾ä¿äººæ£€æµ‹
                if any(kw in last_speech for kw in ['ä¸ä¸€å®šæ˜¯ç‹¼', 'å¯èƒ½å†¤æ‰', 'å†çœ‹çœ‹', 'å…ˆåˆ«æŠ•']):
                    tags.append("è¯•å›¾ä¿äºº")
                # æ”»å‡»é¢„è¨€å®¶æ£€æµ‹
                if any(kw in last_speech for kw in ['å‡é¢„è¨€å®¶', 'æ‚è·³', 'ä¸ä¿¡', 'éª—å­']):
                    tags.append("æ”»å‡»é¢„è¨€å®¶")

            # åˆ†ææŠ•ç¥¨ç‰¹å¾
            if p_votes:
                # è¨€è¡Œä¸ä¸€æ£€æµ‹ï¼ˆéœ€è¦å¯¹æ¯”å‘è¨€å’ŒæŠ•ç¥¨ï¼‰
                last_vote = p_votes[-1].get('target', '') if p_votes else ''
                if p_speeches and last_vote:
                    last_speech = p_speeches[-1].get('content', '')
                    # å¦‚æœå‘è¨€ä¸­æåˆ°æŸäººå¥½ï¼Œä½†æŠ•äº†ä»–
                    # ç®€åŒ–ï¼šå¦‚æœå˜´ä¸Šå’ŒæŠ•ç¥¨ä¸ä¸€è‡´
                    pass  # å¤æ‚é€»è¾‘æš‚æ—¶è·³è¿‡

            if tags:
                lines.append(f"- {p.display_name}ï¼šã€æ ‡ç­¾ï¼š{'ã€‘ã€æ ‡ç­¾ï¼š'.join(tags)}ã€‘")

        if len(lines) > 2:
            lines.append("â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”")
            lines.append("")
            lines.append(self.WOLF_MINING_TIPS)
            return "\n".join(lines)

        return ""

    def _get_duel_context(self, player: "Player", room: "GameRoom") -> str:
        """æ£€æµ‹æ˜¯å¦å­˜åœ¨å¯¹è·³å¹¶ç”Ÿæˆå¯¹è·³è¾©è®ºæç¤ºè¯"""
        if not player.ai_context:
            return ""

        events = player.ai_context.game_events
        speeches = player.ai_context.speeches

        # æ£€æµ‹æ˜¯å¦æœ‰å¯¹è·³ï¼ˆä¸¤äººè·³é¢„è¨€å®¶ï¼‰
        seer_jumpers = []
        for event in events:
            if "é¢„è¨€å®¶" in event and ("è·³" in event or "æ˜¯é¢„è¨€å®¶" in event):
                # å°è¯•æå–è·³é¢„è¨€å®¶çš„ç©å®¶
                import re
                match = re.search(r'(\d+å·\S*|\S+).*?é¢„è¨€å®¶', event)
                if match:
                    jumper = match.group(1)
                    if jumper not in seer_jumpers:
                        seer_jumpers.append(jumper)

        # å¦‚æœæœ‰ä¸¤äººå¯¹è·³
        if len(seer_jumpers) >= 2:
            role_key = self._get_role_key(player)

            # å¦‚æœç©å®¶æ˜¯å¯¹è·³çš„å½“äº‹äºº
            if player.display_name in seer_jumpers:
                opponent = [j for j in seer_jumpers if j != player.display_name][0]
                return self.DUEL_DEBATE_TIPS["attacker"].format(opponent=opponent)
            else:
                # æ—è§‚è€…è§†è§’
                return self.DUEL_DEBATE_TIPS["observer"].format(
                    player_a=seer_jumpers[0],
                    player_b=seer_jumpers[1]
                )

        return ""

    def _get_peaceful_night_tip(self, player: "Player", room: "GameRoom") -> str:
        """è·å–å¹³å®‰å¤œç‰¹æ®Šæç¤ºè¯ï¼ˆå½“æ²¡æœ‰äººæ­»äº¡æ—¶è§¦å‘ï¼‰"""
        # æ£€æŸ¥æ˜¯å¦æ˜¯å¹³å®‰å¤œï¼ˆé€šè¿‡äº‹ä»¶è®°å½•åˆ¤æ–­ï¼‰
        if not player.ai_context:
            return ""

        events = player.ai_context.game_events
        current_round = room.current_round
        is_peaceful_night = False
        has_death_event = False  # é˜²å¾¡æ€§æ£€æŸ¥ï¼šæ˜¯å¦æœ‰æ­»äº¡äº‹ä»¶
        saved_player_name = None
        killed_target_name = None

        # æ£€æŸ¥å½“å‰å›åˆçš„äº‹ä»¶ï¼ˆåªæ£€æŸ¥å½“å‰å›åˆï¼Œé¿å…è¯¯åˆ¤å†å²å¹³å®‰å¤œï¼‰
        for event in events[-10:]:
            # åªæ£€æŸ¥å½“å‰å›åˆçš„å¹³å®‰å¤œ
            if f"ç¬¬{current_round}å¤œï¼šå¹³å®‰å¤œ" in event:
                is_peaceful_night = True
            # é˜²å¾¡æ€§æ£€æŸ¥ï¼šæ˜¯å¦æœ‰å½“å‰å›åˆçš„æ­»äº¡äº‹ä»¶
            if f"ç¬¬{current_round}å¤œæ­»äº¡" in event:
                has_death_event = True
            # å¥³å·«è§†è§’ï¼šæ£€æŸ¥æ˜¯å¦æ•‘äº†äºº
            if "æ•‘äº†" in event or "ä½¿ç”¨è§£è¯" in event:
                # å°è¯•æå–è¢«æ•‘ç©å®¶å
                import re
                match = re.search(r'æ•‘äº†\s*(\S+)', event)
                if match:
                    saved_player_name = match.group(1)

        # é˜²å¾¡æ€§æ£€æŸ¥ï¼šå¦‚æœåŒæ—¶å­˜åœ¨å¹³å®‰å¤œå’Œæ­»äº¡äº‹ä»¶ï¼Œè¯´æ˜æ•°æ®ä¸ä¸€è‡´ï¼ˆBUGï¼‰
        if is_peaceful_night and has_death_event:
            logger.error(f"[BUGæ£€æµ‹] ç¬¬{current_round}å¤œåŒæ—¶å­˜åœ¨å¹³å®‰å¤œå’Œæ­»äº¡äº‹ä»¶ï¼ä»¥æ­»äº¡äº‹ä»¶ä¸ºå‡†ã€‚")
            return ""  # ä¸è¿”å›å¹³å®‰å¤œæç¤º

        # å¦‚æœæœ‰æ­»äº¡äº‹ä»¶ï¼Œè¯´æ˜ä¸æ˜¯å¹³å®‰å¤œ
        if has_death_event:
            return ""

        if not is_peaceful_night:
            return ""

        role_key = self._get_role_key(player)

        # å¥³å·«è§†è§’
        if role_key == "witch":
            if player.ai_context.last_killed_player:
                saved_player_name = player.ai_context.last_killed_player
            if saved_player_name:
                return self.PEACEFUL_NIGHT_TIPS["witch"].format(
                    saved_player=saved_player_name
                )
            return ""

        # ç‹¼äººè§†è§’
        if role_key == "werewolf":
            # ç‹¼äººåº”è¯¥çŸ¥é“æ˜¨æ™šåˆ€äº†è°ï¼ˆé€šè¿‡ä¸Šä¸‹æ–‡äº‹ä»¶ï¼‰
            for event in events[-10:]:
                if "é€‰æ‹©åˆ€" in event or "å‡»æ€" in event:
                    import re
                    match = re.search(r'åˆ€\s*(\S+)|å‡»æ€\s*(\S+)', event)
                    if match:
                        killed_target_name = match.group(1) or match.group(2)
            if killed_target_name:
                return self.PEACEFUL_NIGHT_TIPS["werewolf"].format(
                    killed_target=killed_target_name
                )
            return self.PEACEFUL_NIGHT_TIPS["werewolf"].format(
                killed_target="æŸäººï¼ˆä½ ä»¬æ˜¨æ™šçš„ç›®æ ‡ï¼‰"
            )

        # å¥½äººè§†è§’ï¼ˆé¢„è¨€å®¶ã€çŒäººã€æ‘æ°‘ï¼‰
        return self.PEACEFUL_NIGHT_TIPS["good"]

    def _get_double_death_tip(self, player: "Player", room: "GameRoom") -> str:
        """è·å–åŒæ­»ç‰¹æ®Šæç¤ºè¯ï¼ˆå½“ä¸¤äººæ­»äº¡æ—¶è§¦å‘ï¼‰"""
        if not player.ai_context:
            return ""

        events = player.ai_context.game_events
        dead_players = []
        wolf_killed_name = None
        witch_poisoned_name = None
        current_round = room.current_round

        logger.info(f"[åŒæ­»æ£€æŸ¥] ç©å®¶={player.name}, current_round={current_round}, äº‹ä»¶æ•°={len(events)}")

        # æ£€æŸ¥æœ€è¿‘äº‹ä»¶ï¼Œå¯»æ‰¾å½“å‰å›åˆçš„åŒæ­»ç›¸å…³ä¿¡æ¯
        for event in events[-10:]:
            # æ£€æµ‹æ­»äº¡å…¬å‘Š - æ ¼å¼ï¼š"ç¬¬Xå¤œæ­»äº¡ï¼šxxx, yyy" æˆ– "ç¬¬Xå¤œæ­»äº¡ï¼šxxx"
            # åªæ£€æŸ¥å½“å‰å›åˆçš„æ­»äº¡äº‹ä»¶
            if "æ­»äº¡" in event and f"ç¬¬{current_round}å¤œ" in event:
                logger.info(f"[åŒæ­»æ£€æŸ¥] æ‰¾åˆ°æ­»äº¡äº‹ä»¶: {event}")
                import re
                # ä¼˜å…ˆåŒ¹é… "ç¬¬Xå¤œæ­»äº¡ï¼šxxx, yyy" æ ¼å¼
                death_match = re.search(r'æ­»äº¡[ï¼š:]\s*(.+)', event)
                if death_match:
                    dead_str = death_match.group(1)
                    # æŒ‰é€—å·åˆ†å‰²æ­»è€…
                    names = [n.strip() for n in dead_str.split(',') if n.strip()]
                    logger.info(f"[åŒæ­»æ£€æŸ¥] è§£æåˆ°çš„æ­»è€…: {names}")
                    for name in names:
                        if name and name not in dead_players:
                            dead_players.append(name)

            # ç‹¼äººè§†è§’ï¼šæå–åˆ€äººç›®æ ‡
            if "é€‰æ‹©åˆ€" in event or "å‡»æ€" in event or "ç‹¼äººæ€" in event:
                import re
                match = re.search(r'åˆ€\s*(\S+)|å‡»æ€\s*(\S+)|æ€.*?(\d+å·)', event)
                if match:
                    wolf_killed_name = match.group(1) or match.group(2) or match.group(3)

            # å¥³å·«è§†è§’ï¼šæå–æ¯’äººç›®æ ‡
            if "æ¯’" in event and ("ä½¿ç”¨" in event or "æ¯’äº†" in event or "æ¯’æ­»" in event):
                import re
                match = re.search(r'æ¯’.*?(\d+å·\S*|\S+)', event)
                if match:
                    witch_poisoned_name = match.group(1)

        # å¦‚æœå½“å‰å›åˆä¸æ˜¯åŒæ­»ï¼ˆä»äº‹ä»¶ä¸­è§£æï¼‰ï¼Œè¿”å›ç©º
        # æ³¨æ„ï¼šä¸èƒ½ç”¨ç´¯è®¡çš„ dead_players åˆ—è¡¨ï¼Œé‚£ä¼šæŠŠä¹‹å‰æŠ•ç¥¨å‡ºå±€çš„äººä¹Ÿç®—è¿›å»
        logger.info(f"[åŒæ­»æ£€æŸ¥] dead_players={dead_players}, é•¿åº¦={len(dead_players)}")
        if len(dead_players) < 2:
            logger.info(f"[åŒæ­»æ£€æŸ¥] æ­»è€…ä¸è¶³2äººï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²")
            return ""

        dead_player_a = dead_players[-2] if len(dead_players) >= 2 else dead_players[0]
        dead_player_b = dead_players[-1]

        role_key = self._get_role_key(player)

        # å¥³å·«è§†è§’
        if role_key == "witch":
            # å¥³å·«çŸ¥é“è‡ªå·±æ¯’äº†è°
            if witch_poisoned_name:
                other_dead = dead_player_b if witch_poisoned_name in dead_player_a else dead_player_a
                return self.DOUBLE_DEATH_TIPS["witch"].format(
                    dead_player_a=dead_player_a,
                    dead_player_b=dead_player_b,
                    poisoned_player=witch_poisoned_name,
                    other_dead=other_dead
                )
            return ""

        # ç‹¼äººè§†è§’
        if role_key == "werewolf":
            if wolf_killed_name:
                # ç‹¼äººçŸ¥é“è‡ªå·±åˆ€äº†è°ï¼Œå¦ä¸€ä¸ªå°±æ˜¯è¢«æ¯’çš„
                witch_poisoned = dead_player_b if wolf_killed_name in dead_player_a else dead_player_a
                return self.DOUBLE_DEATH_TIPS["werewolf"].format(
                    dead_player_a=dead_player_a,
                    dead_player_b=dead_player_b,
                    wolf_killed=wolf_killed_name,
                    witch_poisoned=witch_poisoned
                )
            # å¦‚æœæ²¡æ‰¾åˆ°åˆ€äººè®°å½•ï¼Œè¿”å›é€šç”¨ç‹¼äººè§†è§’
            return self.DOUBLE_DEATH_TIPS["werewolf"].format(
                dead_player_a=dead_player_a,
                dead_player_b=dead_player_b,
                wolf_killed="ä½ ä»¬åˆ€çš„é‚£ä¸ª",
                witch_poisoned="å¦ä¸€ä¸ªæ­»è€…"
            )

        # å¥½äººè§†è§’ï¼ˆé¢„è¨€å®¶ã€çŒäººã€æ‘æ°‘ï¼‰
        return self.DOUBLE_DEATH_TIPS["good"].format(
            dead_player_a=dead_player_a,
            dead_player_b=dead_player_b
        )

    def _get_special_event_tip(self, player: "Player", room: "GameRoom") -> str:
        """è·å–ç‰¹æ®Šäº‹ä»¶æç¤ºè¯ï¼ˆå¹³å®‰å¤œæˆ–åŒæ­»ï¼‰"""
        # å…ˆæ£€æŸ¥åŒæ­»ï¼ˆæ›´é‡è¦ï¼Œç¡®ä¿ä¸ä¼šè¢«å¹³å®‰å¤œè¦†ç›–ï¼‰
        double_death_tip = self._get_double_death_tip(player, room)
        if double_death_tip:
            return double_death_tip

        # å†æ£€æŸ¥å¹³å®‰å¤œ
        peaceful_tip = self._get_peaceful_night_tip(player, room)
        if peaceful_tip:
            return peaceful_tip

        return ""

    # ==================== ç‹¼äººè¡ŒåŠ¨ ====================

    async def decide_werewolf_kill(self, player: "Player", room: "GameRoom") -> Optional[int]:
        """AIç‹¼äººé€‰æ‹©å‡»æ€ç›®æ ‡"""
        context = self._build_context(player, room)
        role_key = self._get_role_key(player)
        soul_setting = self.ROLE_SOUL_SETTINGS.get(role_key, "")
        tactical_directive = self._get_tactical_directive(player, room)

        prompt = self.ROLE_PROMPTS["werewolf_kill"].format(
            anti_hallucination=self.ANTI_HALLUCINATION_PROTOCOL,
            soul_setting=soul_setting,
            context=context,
            tactical_directive=tactical_directive
        )

        response = await self._call_llm(prompt, player)
        if response:
            numbers = re.findall(r'\d+', response)
            if numbers:
                target = int(numbers[0])
                if 1 <= target <= 9:
                    return target
        return None

    async def decide_werewolf_chat(self, player: "Player", room: "GameRoom") -> Optional[str]:
        """AIç‹¼äººç”Ÿæˆå¯†è°‹æ¶ˆæ¯"""
        context = self._build_context(player, room)

        prompt = self.ROLE_PROMPTS["werewolf_chat"].format(
            context=context,
            human_style=self.HUMAN_STYLE_TIPS
        )

        response = await self._call_llm(prompt, player)
        if response:
            return response[:50]
        return None

    # ==================== é¢„è¨€å®¶è¡ŒåŠ¨ ====================

    async def decide_seer_check(self, player: "Player", room: "GameRoom") -> Optional[int]:
        """AIé¢„è¨€å®¶é€‰æ‹©éªŒäººç›®æ ‡"""
        context = self._build_context(player, room)
        role_key = self._get_role_key(player)
        soul_setting = self.ROLE_SOUL_SETTINGS.get(role_key, "")

        prompt = self.ROLE_PROMPTS["seer_check"].format(
            anti_hallucination=self.ANTI_HALLUCINATION_PROTOCOL,
            soul_setting=soul_setting,
            context=context
        )

        response = await self._call_llm(prompt, player)
        if response:
            numbers = re.findall(r'\d+', response)
            if numbers:
                target = int(numbers[0])
                if 1 <= target <= 9:
                    return target
        return None

    # ==================== å¥³å·«è¡ŒåŠ¨ ====================

    async def decide_witch_action(
        self,
        player: "Player",
        room: "GameRoom",
        can_save: bool,
        can_poison: bool,
        killed_player_name: Optional[str] = None
    ) -> Tuple[str, Optional[int]]:
        """AIå¥³å·«å†³å®šç”¨è¯"""
        context = self._build_context(player, room)
        role_key = self._get_role_key(player)
        soul_setting = self.ROLE_SOUL_SETTINGS.get(role_key, "")

        available_actions = []
        if killed_player_name and can_save:
            available_actions.append(f"ğŸ’Š ä»Šæ™š {killed_player_name} è¢«ç‹¼äººæ€å®³ï¼Œä½ å¯ä»¥ä½¿ç”¨ã€è§£è¯ã€‘æ•‘ä»–")
        if can_poison:
            available_actions.append("â˜ ï¸ ä½ å¯ä»¥ä½¿ç”¨ã€æ¯’è¯ã€‘æ¯’æ­»ä¸€ä¸ªäºº")
        if not available_actions:
            available_actions.append("âŒ ä½ çš„è¯éƒ½ç”¨å®Œäº†ï¼Œä»Šæ™šæ— æ³•è¡ŒåŠ¨")

        prompt = self.ROLE_PROMPTS["witch_action"].format(
            anti_hallucination=self.ANTI_HALLUCINATION_PROTOCOL,
            soul_setting=soul_setting,
            context=context,
            available_actions="\n".join(available_actions)
        )

        response = await self._call_llm(prompt, player)
        if response:
            response_lower = response.lower()
            if "æ•‘" in response_lower or "save" in response_lower:
                return ("save", None)
            elif "æ¯’" in response_lower or "poison" in response_lower:
                numbers = re.findall(r'\d+', response)
                if numbers:
                    return ("poison", int(numbers[0]))
        return ("pass", None)

    # ==================== çŒäººè¡ŒåŠ¨ ====================

    async def decide_hunter_shoot(self, player: "Player", room: "GameRoom") -> Optional[int]:
        """AIçŒäººå†³å®šå¼€æªç›®æ ‡"""
        context = self._build_context(player, room)
        role_key = self._get_role_key(player)
        soul_setting = self.ROLE_SOUL_SETTINGS.get(role_key, "")

        prompt = self.ROLE_PROMPTS["hunter_shoot"].format(
            anti_hallucination=self.ANTI_HALLUCINATION_PROTOCOL,
            soul_setting=soul_setting,
            context=context
        )

        response = await self._call_llm(prompt, player)
        if response:
            if "ä¸å¼€æª" in response or "ä¸å¼€" in response:
                return None
            numbers = re.findall(r'\d+', response)
            if numbers:
                target = int(numbers[0])
                if 1 <= target <= 9:
                    return target
        return None

    # ==================== ç™½å¤©å‘è¨€ ====================

    async def generate_speech(self, player: "Player", room: "GameRoom", is_pk: bool = False) -> str:
        """AIç”Ÿæˆç™½å¤©å‘è¨€"""
        context = self._build_context(player, room)
        context += "\n" + self._get_situation_awareness(room)

        # æ£€æŸ¥ç‰¹æ®Šäº‹ä»¶ï¼ˆå¹³å®‰å¤œæˆ–åŒæ­»ï¼‰ï¼Œè¿½åŠ æç¤ºè¯
        special_event_tip = self._get_special_event_tip(player, room)
        if special_event_tip:
            context += "\n" + special_event_tip

        # æ·»åŠ æˆ˜æœ¯æŒ‡ä»¤ï¼ˆç»å¢ƒå±€/ç‹¼äººæ”¶å‰²ç­‰ï¼‰
        tactical_directive = self._get_tactical_directive(player, room)
        if tactical_directive:
            context += "\n" + tactical_directive

        # æ·»åŠ å¯¹è·³è¾©è®ºæç¤ºè¯ï¼ˆå¦‚æœ‰å¯¹è·³ï¼‰
        duel_context = self._get_duel_context(player, room)
        if duel_context:
            context += "\n" + duel_context

        # æ·»åŠ ç©å®¶è¡Œä¸ºåˆ†æï¼ˆæŠ¿ç‹¼æŠ€å·§ï¼‰
        behavior_analysis = self._get_behavior_analysis_prompt(player, room)
        if behavior_analysis:
            context += "\n" + behavior_analysis

        role_key = self._get_role_key(player)
        role_name = player.role.display_name if player.role else "ç©å®¶"
        soul_setting = self.ROLE_SOUL_SETTINGS.get(role_key, "")
        personality = self._get_player_personality(player)

        if is_pk:
            pk_tips = self.PK_TIPS.get(role_key, self.PK_TIPS["villager"])
            prompt = self.ROLE_PROMPTS["pk_speech"].format(
                anti_hallucination=self.ANTI_HALLUCINATION_PROTOCOL,
                soul_setting=soul_setting,
                personality=personality,
                context=context,
                pk_tips=pk_tips,
                human_style=self.HUMAN_STYLE_TIPS
            )
        else:
            # åŠ¨æ€è°ƒæ•´æ‘æ°‘æç¤ºè¯ï¼šé¦–æ—¥å‘è¨€ vs æ­£å¸¸å‘è¨€
            if role_key == "villager" and player.ai_context.current_round == 1:
                # é¦–æ—¥æ‘æ°‘å‘è¨€æç¤ºï¼ˆç¬¬ä¸€å¤©ä¿¡æ¯é‡å°‘ï¼Œé¿å…è¿‡åº¦æ¨ç†ï¼‰
                speech_tips = """ã€ğŸ‘¨â€ğŸŒ¾ æ‘æ°‘é¦–æ—¥å‘è¨€ã€‘
âš ï¸ è¿™æ˜¯ç¬¬ä¸€å¤©ï¼Œä¿¡æ¯é‡è¾ƒå°‘ï¼Œä¸è¦è¿‡åº¦æ¨ç†æˆ–ç¼–é€ ä¸å­˜åœ¨çš„ä¿¡æ¯ï¼

ğŸ—£ï¸ é¦–æ—¥å‘è¨€å»ºè®®ï¼š
1. å¦‚æœè¿˜æ²¡æœ‰äººå‘è¨€ï¼šç®€å•è¡¨æ€ï¼Œç­‰å¾…ä¿¡æ¯
2. å¦‚æœå·²æœ‰å°‘é‡å‘è¨€ï¼šç®€å•è¯„ä»·ï¼Œä¸è¦è¿‡åº¦åˆ†æ
3. å¦‚æœæœ‰é¢„è¨€å®¶è·³å‡ºï¼šå¯ä»¥è¡¨æ€æ”¯æŒæˆ–æ€€ç–‘ï¼Œä½†è¦åŸºäºå®é™…å‘è¨€
4. ä¸¥ç¦ç¼–é€ "æ˜¨å¤©"ã€"å‰ä¸€å¤©"ç­‰è™šå‡ä¿¡æ¯

ğŸ’¡ è®°ä½ï¼šæ ¹æ®å·²æœ‰çš„å‘è¨€å†…å®¹å‘è¨€ï¼Œä¸è¦åˆ†æä¸å­˜åœ¨çš„äº‹æƒ…ï¼"""
            else:
                speech_tips = self.SPEECH_TIPS.get(role_key, self.SPEECH_TIPS["villager"])

            prompt = self.ROLE_PROMPTS["day_speech"].format(
                anti_hallucination=self.ANTI_HALLUCINATION_PROTOCOL,
                soul_setting=soul_setting,
                personality=personality,
                context=context,
                speech_tips=speech_tips,
                human_style=self.HUMAN_STYLE_TIPS
            )

        response = await self._call_llm(prompt, player)
        if response:
            # æ¸…ç†å¯èƒ½çš„å‰ç¼€
            response = re.sub(r'^[\[ã€]?(å‘è¨€|è¯´è¯|speech)[\]ã€‘]?[ï¼š:]\s*', '', response, flags=re.IGNORECASE)
            # é™åˆ¶å‘è¨€é•¿åº¦ï¼ˆ300å­—ç¬¦ï¼Œé¿å…åˆ·å±ä½†ä¿æŒå®Œæ•´è¡¨è¾¾ï¼‰
            return response[:300]

        # é»˜è®¤å‘è¨€
        defaults = [
            "æˆ‘å…ˆå¬å¬å¤§å®¶æ€ä¹ˆè¯´å§",
            "ç›®å‰ä¿¡æ¯å¤ªå°‘äº†ï¼Œæˆ‘å†è§‚å¯Ÿä¸€ä¸‹",
            "emmm æˆ‘æš‚æ—¶æ²¡ä»€ä¹ˆæƒ³æ³•",
        ]
        return random.choice(defaults)

    # ==================== æŠ•ç¥¨ ====================

    async def decide_vote(self, player: "Player", room: "GameRoom", is_pk: bool = False, pk_candidates: List[str] = None) -> Tuple[str, Optional[int]]:
        """AIç”ŸæˆæŠ•ç¥¨å†³ç­–"""
        context = self._build_context(player, room)
        context += "\n" + self._get_situation_awareness(room)

        # æ£€æŸ¥ç‰¹æ®Šäº‹ä»¶ï¼ˆå¹³å®‰å¤œæˆ–åŒæ­»ï¼‰ï¼Œè¿½åŠ æç¤ºè¯
        special_event_tip = self._get_special_event_tip(player, room)
        if special_event_tip:
            context += "\n" + special_event_tip

        # æ·»åŠ æˆ˜æœ¯æŒ‡ä»¤ï¼ˆç»å¢ƒå±€/ç‹¼äººæ”¶å‰²ç­‰ï¼‰
        tactical_directive = self._get_tactical_directive(player, room)
        if tactical_directive:
            context += "\n" + tactical_directive

        # æ·»åŠ ç©å®¶è¡Œä¸ºåˆ†æï¼ˆæŠ¿ç‹¼æŠ€å·§ï¼‰
        behavior_analysis = self._get_behavior_analysis_prompt(player, room)
        if behavior_analysis:
            context += "\n" + behavior_analysis

        role_key = self._get_role_key(player)
        role_name = player.role.display_name if player.role else "ç©å®¶"
        soul_setting = self.ROLE_SOUL_SETTINGS.get(role_key, "")
        vote_tips = self.VOTE_TIPS.get(role_key, self.VOTE_TIPS["villager"])

        prompt = self.ROLE_PROMPTS["day_vote"].format(
            anti_hallucination=self.ANTI_HALLUCINATION_PROTOCOL,
            soul_setting=soul_setting,
            context=context,
            vote_tips=vote_tips,
            human_style=self.HUMAN_STYLE_TIPS
        )

        response = await self._call_llm(prompt, player)

        speech = ""
        vote_target = None

        if response:
            # è§£æå‘è¨€
            speech_match = re.search(r'\[å‘è¨€\]\s*(.+?)(?=\[æŠ•ç¥¨\]|$)', response, re.DOTALL)
            if speech_match:
                speech = speech_match.group(1).strip()[:30]

            # è§£ææŠ•ç¥¨
            vote_match = re.search(r'\[æŠ•ç¥¨\]\s*(\d+|å¼ƒç¥¨)', response)
            if vote_match:
                vote_str = vote_match.group(1)
                if vote_str != "å¼ƒç¥¨":
                    try:
                        vote_target = int(vote_str)
                        if not (1 <= vote_target <= 9):
                            vote_target = None
                    except ValueError:
                        pass

            # å¦‚æœæ²¡æœ‰æ‰¾åˆ°æ ¼å¼åŒ–çš„å†…å®¹ï¼Œå°è¯•ç›´æ¥æå–
            if not speech and not vote_target:
                numbers = re.findall(r'\d+', response)
                if numbers:
                    vote_target = int(numbers[0])
                    if not (1 <= vote_target <= 9):
                        vote_target = None
                speech = response[:30] if len(response) <= 30 else ""

        return (speech, vote_target)

    # ==================== é—è¨€ ====================

    async def generate_last_words(self, player: "Player", room: "GameRoom") -> str:
        """AIç”Ÿæˆé—è¨€"""
        context = self._build_context(player, room)
        role_key = self._get_role_key(player)
        role_name = player.role.display_name if player.role else "ç©å®¶"

        last_words_tips = self.LAST_WORDS_TIPS.get(role_key, self.LAST_WORDS_TIPS["villager"])

        # é¢„è¨€å®¶ç‰¹æ®Šå¤„ç†ï¼šé™„åŠ éªŒäººç»“æœ
        if role_key == "seer" and player.ai_context and player.ai_context.seer_results:
            results = [f"{r['target']}æ˜¯{'ç‹¼' if r['is_werewolf'] else 'é‡‘æ°´'}"
                      for r in player.ai_context.seer_results]
            last_words_tips += f"\n\nğŸ”® ã€é‡è¦ã€‘ä½ çš„æŸ¥éªŒè®°å½•ï¼š{'; '.join(results)}\nåŠ¡å¿…å…¨éƒ¨å…¬å¸ƒå‡ºæ¥ï¼"

        prompt = self.ROLE_PROMPTS["last_words"].format(
            anti_hallucination=self.ANTI_HALLUCINATION_PROTOCOL,
            context=context,
            role_name=role_name,
            last_words_tips=last_words_tips,
            human_style=self.HUMAN_STYLE_TIPS
        )

        response = await self._call_llm(prompt, player)
        if response:
            return response[:100]

        return "æˆ‘æ²¡ä»€ä¹ˆå¥½è¯´çš„äº†ï¼Œç¥å¤§å®¶å¥½è¿ã€‚"

    # ==================== ä¸Šä¸‹æ–‡æ›´æ–° ====================

    def initialize_ai_context(self, player: "Player", room: "GameRoom") -> None:
        """åˆå§‹åŒ–AIç©å®¶çš„æ¸¸æˆä¸Šä¸‹æ–‡"""
        from ..models.ai_player import AIPlayerContext

        if not player.is_ai:
            return

        # åˆ›å»ºä¸Šä¸‹æ–‡å¯¹è±¡
        ctx = AIPlayerContext()
        ctx.player_number = player.number
        ctx.role_name = player.role.display_name if player.role else "æœªçŸ¥"
        ctx.is_werewolf = player.role and player.role.value == "werewolf"
        ctx.current_round = room.current_round
        ctx.current_phase = self._get_phase_description(room)

        # åˆå§‹åŒ–å­˜æ´»ç©å®¶åˆ—è¡¨
        alive_list = [p.display_name for p in room.get_alive_players()]
        ctx.update_alive_players(alive_list, [])

        # ç‹¼äººï¼šè®°å½•é˜Ÿå‹
        if ctx.is_werewolf:
            teammates = [
                w.display_name for w in room.get_alive_werewolves()
                if w.id != player.id
            ]
            ctx.werewolf_teammates = teammates

        # ç»‘å®šåˆ°ç©å®¶
        player.ai_context = ctx

        logger.info(f"[ç‹¼äººæ€AI] åˆå§‹åŒ– {player.name} çš„ä¸Šä¸‹æ–‡: {ctx.role_name}")

    def update_ai_context(self, player: "Player", room: "GameRoom") -> None:
        """æ›´æ–°AIç©å®¶çš„æ¸¸æˆä¸Šä¸‹æ–‡"""
        if not player.is_ai or not player.ai_context:
            return

        ctx = player.ai_context
        ctx.current_round = room.current_round
        ctx.current_phase = self._get_phase_description(room)

        alive_list = [p.display_name for p in room.get_alive_players()]
        dead_list = [p.display_name for p in room.players.values() if not p.is_alive]
        ctx.update_alive_players(alive_list, dead_list)

        if player.role and player.role.value == "witch":
            ctx.witch_antidote_used = room.witch_state.antidote_used
            ctx.witch_poison_used = room.witch_state.poison_used
            if room.last_killed_id:
                killed = room.get_player(room.last_killed_id)
                ctx.last_killed_player = killed.display_name if killed else None

    def _get_phase_description(self, room: "GameRoom") -> str:
        """è·å–å½“å‰é˜¶æ®µçš„äººç±»å¯è¯»æè¿°"""
        from ..models import GamePhase
        phase = room.phase
        round_num = room.current_round

        # é¦–æ—¥å‘è¨€é˜¶æ®µç‰¹æ®Šæè¿°ï¼ˆæ˜ç¡®é¦–æ—¥ï¼Œé˜²æ­¢AIäº§ç”Ÿè™šå‡è®°å¿†ï¼‰
        if round_num == 1 and phase == GamePhase.DAY_SPEAKING:
            return "ç¬¬1å¤©ç™½å¤©ï¼ˆé¦–æ—¥å‘è¨€ï¼‰- æ˜¨æ™šåªåˆ†é…äº†èº«ä»½ï¼Œä»Šå¤©æ˜¯ç¬¬ä¸€æ¬¡å‘è¨€ï¼Œæ²¡æœ‰ä»»ä½•å‰ç½®ä¿¡æ¯"

        phase_map = {
            GamePhase.NIGHT_WOLF: f"ç¬¬{round_num}å¤©å¤œæ™š - ç‹¼äººè¡ŒåŠ¨é˜¶æ®µ",
            GamePhase.NIGHT_SEER: f"ç¬¬{round_num}å¤©å¤œæ™š - é¢„è¨€å®¶éªŒäººé˜¶æ®µ",
            GamePhase.NIGHT_WITCH: f"ç¬¬{round_num}å¤©å¤œæ™š - å¥³å·«è¡ŒåŠ¨é˜¶æ®µ",
            GamePhase.DAY_SPEAKING: f"ç¬¬{round_num}å¤©ç™½å¤© - å‘è¨€é˜¶æ®µ",
            GamePhase.DAY_VOTE: f"ç¬¬{round_num}å¤©ç™½å¤© - æŠ•ç¥¨é˜¶æ®µ",
            GamePhase.DAY_PK: f"ç¬¬{round_num}å¤©ç™½å¤© - PKå‘è¨€é˜¶æ®µ",
            GamePhase.LAST_WORDS: f"ç¬¬{round_num}å¤© - é—è¨€é˜¶æ®µ",
        }

        return phase_map.get(phase, f"ç¬¬{round_num}å¤©")

    def clear_player_data(self, player_id: str) -> None:
        """æ¸…ç†ç©å®¶æ•°æ®"""
        self._retry_counts.pop(player_id, None)
        self._player_personalities.pop(player_id, None)
