"""战术分析提示词 - 局势感知、对跳辩论、抿狼技巧"""

# 局势感知模板
SITUATION_TEMPLATE = """【📊 当前局势】
存活: {alive_count}人 (好人约{good_count}，狼人约{wolf_count})
态势: {situation}
"""

# 动态战术指令（根据局势生成）
TACTICAL_DIRECTIVES = {
    "wolf_advantage": """【⚔️ 战术指令：狼人优势 - 准备屠城！】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔥 局势分析：神职只剩1个或平民不足，狼人即将获胜！
🎯 行动指令：
- 不需要再伪装了，直接摊牌！
- 所有狼人一起冲票，把最后的好人投出去
- 绑票！控场！不要再聊逻辑了
- 可以说："狼人控场，交牌吧"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━""",

    "wolf_disadvantage": """【🛡️ 战术指令：狼人劣势 - 孤狼作战！】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 局势分析：队友大量出局，场上还有神职，非常危险！
🎯 行动指令：
- 倒钩！你必须比好人还像好人
- 带头踩死你的狼队友（哪怕是尸体）
- 完全站边真预言家，祈祷能活到晚上
- 活下去才有机会刀死神职翻盘
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━""",

    "wolf_teammate_exposed": """【🚨 战术指令：队友被查杀！】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 紧急情况：队友被预言家点名查杀！
🎯 行动选择：
1.【悍跳保队友】跳预言家对跳，给真预言家发查杀
2.【果断卖队友】"我也觉得他有问题"，做高自己
3.【冲票预言家】号召大家投真预言家

选择取决于你的判断和胆量！
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━""",

    "good_confused": """【😵 战术指令：好人迷茫局！】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 局势分析：预言家已死或存疑，没人带队，场上混乱
🎯 行动指令：
- 浑水摸鱼！制造更多混乱
- 质疑那个最像带头大哥的人
- 让好人互打，你坐收渔翁之利
- 可以假装在分析，实际在带节奏
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━""",

    "normal": """【📋 战术指令：正常对局】
保持冷静，按照正常策略行动。
伪装好自己，配合队友，找机会推好人出局。
""",

    # 绝境局战术（好人视角）
    "good_desperate": """【🆘 绝境战术指令：好人孤注一掷！】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚠️ 局势分析：极度危险！好人再推错一人就输了！

🧠 【思维转变 - 必须剑走偏锋】
❌ 放弃平庸逻辑：不要再盘"谁划水是狼"了，划水的可能是吓傻的平民
✅ 找深水狼：把目光锁定在那个【发言最完美、最挑不出毛病、全场身份最高】的人！
   → 只有倒钩狼（深水狼）才能活到现在不被怀疑

💬 煽动话术：
"如果不搏一把，我们必输！我知道X号一直像好人，但如果他是狼，我们就全完了。
今天我建议全票下X号，输了我背锅！"

🎯 行动指令：
1. 质疑场上"身份最高"的人（越完美越可疑）
2. 煽动其他好人一起赌一把
3. 用气势压制，不要再讲道理
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━""",

    # 绝境局战术（狼人视角）
    "wolf_final_push": """【🏆 绝境战术指令：狼人稳住收割！】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔥 局势分析：只要再抗推一个好人就赢了！

🧠 【心态建设 - 稳住别浪】
⚠️ 好人可能开始孤注一掷，会乱猜深水狼
✅ 这时候要表现得比好人还急，还想赢

🎯 行动指令：
1.【控制票型】不要急着冲票，如果好人内讧就分票或跟票
2.【最后伪装】表现得比好人还急切
3.【煽动内讧】让好人互相怀疑

💬 话术模板：
"我也很想赢！我觉得Y号肯定是狼，出他游戏结束！"
"大家冷静，别被带节奏了，我们再分析一下..."
"如果我是狼，我早就被验出来了好吧"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"""
}

# 对跳辩论逻辑
DUEL_CONTEXT_TEMPLATE = {
    "attacker": """【⚔️ 对跳辩论 - 攻击对方】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
你正在和 {opponent} 对跳预言家！必须击溃对方！

🎯 【攻击维度1：验人心路（Why him?）】
攻击点："对方验人的理由太牵强了！他说因为X号看了一眼牌就去验X，这完全是编的！"
自证点："我验Y是因为Y昨天发言攻击了Z，我想定义Y的身份来判断Z的好坏。"（逻辑闭环）

🎯 【攻击维度2：警徽流（Badge Plan）】
攻击点："他的警徽流留了两个毫无存在感的人，这就是怕验到神职撞板子。这种警徽流就是狼人视角！"
自证点："我留警徽流验A，是因为A是场上的焦点牌，验了他能开全场视野。"

🎯 【攻击维度3：状态对比（State）】
"大家听听，那个假预言家在背书！他的发言没有感情！
而我是在真心找狼，我不怕被抗推，我只怕好人输！"

💪 气势要足！不能弱！
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━""",

    "observer": """【👀 对跳辩论 - 旁观站队】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
场上 {player_a} 和 {player_b} 对跳预言家，你需要站队！

🔍 【判断维度1：验人心路】
- 谁的验人理由更合理？更有逻辑闭环？
- 谁的验人像是"事后编的"？

🔍 【判断维度2：警徽流质量】
- 谁的警徽流更有价值？验的是焦点牌还是边缘人？
- 狼人视角的警徽流会避开神职位

🔍 【判断维度3：发言状态】
- 谁更像在"背书"（提前准备好的）？
- 谁更有真情实感？

🔍 【判断维度4：金水表现】
- 谁的金水发言更像好人？
- 狼人发的金水往往会帮狼说话

💬 站队话术："我站X号预言家，因为他的验人心路更合理，Y号的警徽流明显是狼人视角。"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"""
}

# 抿狼技巧
BEHAVIOR_ANALYSIS_TIPS = """【🔍 抿狼技巧 - 行为学分析】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
没有查杀没有银水？只能靠细节找狼！
狼人有信息优势（知道谁是好人），所以发言会有"非自然破绽"。

🎯 【技巧1：视角开天眼（Too Much Info）】
判定依据：某人在没人跳身份时，莫名其妙说"我觉得X号是女巫"
攻击话术："你为什么会觉得他是女巫？你是不是想刀他但不敢刀，所以在试探？你视角不对！"

🎯 【技巧2：伪逻辑与填充物（Fillers）】
判定依据：发言很长，但全是废话（"我是好人，我过了"、"我也听不出来"）
攻击话术："你聊了半天，一个狼坑都没点出来。你是在拖时间吧？你不敢得罪人，因为你怕暴露队友！"

🎯 【技巧3：异常的宽容（Fake Mercy）】
判定依据：对于一个发言很差的人，他不仅不踩，还帮忙找借口
攻击话术："Z号聊爆了你都不打他？你在捞队友吗？你们是共边（一伙）的！"

🎯 【技巧4：跟票行为（Following）】
判定依据：嘴上说不信预言家A，投票却投给了A的查杀对象
攻击话术："你嘴上说站边B，身体却很诚实地帮A冲票。这就是典型的'言行不一'，铁狼一只！"

🎯 【技巧5：过度撇清（Over-Denial）】
判定依据：在没人怀疑他时，突然开始自证
攻击话术："没人说你是狼啊，你急什么？此地无银三百两！"
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"""

# 玩家行为标签系统
BEHAVIOR_TAG_DEFINITIONS = {
    "划水": "发言内容空洞，不表态，不站队，信息量为零",
    "跟票": "投票跟随主流，没有独立判断",
    "试图保人": "为某个被怀疑的玩家辩护或找借口",
    "攻击预言家": "质疑或攻击跳预言家的玩家",
    "情绪激动": "发言带有强烈情绪，可能是真情流露或表演",
    "逻辑清晰": "发言有理有据，分析到位",
    "视角异常": "说出了不该知道的信息，视角像狼",
    "言行不一": "说的和做的不一致，比如嘴上站A投票站B",
    "过度自证": "没人怀疑时主动自证，欲盖弥彰",
    "异常沉默": "在关键时刻选择沉默，可能在躲",
    "带节奏": "试图引导场上舆论，可能是真好人也可能是狼",
    "捞人": "帮助某个玩家脱离嫌疑"
}
